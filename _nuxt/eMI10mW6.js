import{f as e,ah as a,y as t,v as l,aB as s,Q as o,R as i,bw as r,g as n,aI as p,aJ as d,$ as c,I as u,r as m,mI as h,m as f,gH as v,cv as b,bN as g,n as x,K as _,o as w,w as y,bR as k,b as $,i as N,c as C,F as j,D as V,a as T,B as O,C as P,J as W,a5 as F,t as A,G as H,h6 as I,a6 as z,by as B,nP as M,U as R,cn as U,aM as D,aN as E,s as J,E as L,_ as S}from"#entry";import{a as G,E as K}from"./CXu7cHRZ.js";import"./Div4Sb7D.js";import"./1bXUUYzG.js";import{_ as Q}from"./p9W96hRq.js";import"./EyvYgUJ0.js";import"./Fu97jcoq.js";const X={key:0,class:"flex flex-col items-center justify-center py-30px"},q={key:0,src:D},Y={key:1,src:E},Z={key:1},ee={key:0,class:"flex items-center text-right justify-end"},ae={key:1},te={key:0,class:"flex items-center clickable flex-nowrap relative"},le={class:"whitespace-nowrap text-ellipsis overflow-hidden max-w-90px mr-8px"},se={key:4,class:"pr-10px inline-block"},oe=["infinite-scroll-disabled"],ie={key:0,class:"text-center px-0 pt-15px pb-10px text-12px color-[--third-text]"},re={key:1,class:"text-center px-0 pt-15px pb-10px text-12px color-[--third-text]"},ne=S(e({__name:"positionsTable",props:{modelValue:Boolean,tableFilter:{type:Object,default:()=>({hide_risk:1,hide_small:0,user_ids:[]})}},emits:["update:modelValue","hideToken"],setup(e,{emit:D}){const{mode:E}=a(t()),{t:S}=l(),ne=s(),pe=o(),de=i(),{updateHolderNum:ce}=a(r()),ue=n(()=>[{label:S("token"),prop:"token",align:"left",sortable:!1,minWidth:125,showOverflowTooltip:!0},{label:S("balance1"),prop:"balance_usd",align:"right",sortable:!1,formatter:e=>`$${c(e.balance_usd,4)}`},{label:S("amount"),prop:"balance",align:"right",sortable:!1,formatter:e=>`${c(e.balance,4)}`},{label:S("costPrice"),prop:"average_purchase_price_usd",align:"right",sortable:!1,formatter:e=>`$${c(e.average_purchase_price_usd,4)}`},{label:S("currentPrice"),prop:"current_price_usd",align:"right",sortable:!1,formatter:e=>`$${c(e.current_price_usd,4)}`},{label:"PnL",prop:"total_profit_ratio",width:100,align:"right",sortable:!1,getClassName:e=>Number(e.total_profit_ratio)>0?`color-${p[0]}`:`color-${d[0]}`,formatter:e=>`${Number(e.total_profit_ratio)>0?"+":"-"}${c(Math.abs(100*Number(e.total_profit_ratio)),2)}%`}]),me=u([]),he=e,fe=D,ve=m(!1),be=m({}),ge=m({...h}),xe=n({get:()=>he.modelValue,set:e=>fe("update:modelValue",e)}),_e=n(()=>"solana"!==be.value?.chain?pe.evmAddress||de.address:pe.getWalletAddress("solana")||de.address);function we(e){ne.push({name:"token-id",params:{id:e?.index}}),xe.value=!1}f(()=>ce.value,()=>{ge.value={...h},ye()});const ye=async()=>{if(ge.value.loaded)return;ge.value.loaded=!0;const e=ge.value.pageNO,a=ge.value.pageSize;v({pageNO:e,pageSize:a,...he.tableFilter}).then(t=>{const l=t?.data||[];Array.isArray(l)&&l?.length>0?(me.value=1===e?l?.map(e=>({...e,index:e.token===b?g(e.chain)?.wmain_wrapper+"-"+e.chain:`${e.token}-${e.chain}`})):[...me.value].concat(l.filter?.(e=>me.value?.every?.(a=>a.index!==`${e.token}-${e.chain}`))?.map(e=>({...e,index:e.token===b?g(e.chain)?.wmain_wrapper+"-"+e.chain:`${e.token}-${e.chain}`}))),ge.value.finished=l?.length<a,ge.value.finished||ge.value.pageNO++):(1===e&&(me.value=[]),ge.value.finished=!0)}).finally(()=>{setTimeout(()=>{ge.value.loaded=!1},200)})};return f(he.tableFilter,()=>{ge.value={...h},ye()}),f(()=>xe.value,e=>{e&&(ge.value={...h},ye())},{immediate:!0}),x(()=>{}),(e,a)=>{const t=B,l=z,s=P,o=I,i=K,r=G,n=L,p=U;return w(),_(n,{modelValue:N(xe),"onUpdate:modelValue":a[1]||(a[1]=e=>J(xe)?xe.value=e:null),class:"dialog-position",title:e.$t("myPosition1"),width:"680","append-to-body":""},{default:y(()=>[k(e.$slots,"default",{},void 0,!0),$(r,{class:"table-position w-100%",data:N(me),height:400,onRowClick:we,"row-class-name":"group"},{empty:y(()=>[N(ge).loaded?(w(),C("span",Z)):(w(),C("div",X,["light"===N(E)?(w(),C("img",q)):O("",!0),"dark"===N(E)?(w(),C("img",Y)):O("",!0),T("span",null,A(N(S)("emptyNoData")),1)]))]),append:y(()=>[R(T("div",{class:"text-0 lh-0 h-0","infinite-scroll-disabled":N(ge).loaded||N(ge).finished,"infinite-scroll-distance":20,"infinite-scroll-delay":200,"infinite-scroll-immediate":!0},null,8,oe),[[p,ye]]),N(ge).loaded&&N(me)?.length>0?(w(),C("div",ie,A(e.$t("loading")),1)):N(ge).finished&&N(me)?.length>0?(w(),C("div",re,A(e.$t("noMore")),1)):O("",!0)]),default:y(()=>[(w(!0),C(j,null,V(N(ue),a=>(w(),_(i,{key:a.prop,label:a.label,width:a.width,prop:a.prop,"min-width":a?.minWidth,align:a.align,"show-overflow-tooltip":a?.showOverflowTooltip||!1},{header:y(({column:a})=>["total_profit_ratio"==a.property?(w(),C("div",ee,[T("span",null,A(a.label),1),$(l,{effect:N(E),placement:"top-end",content:e.$t("PnLTips"),"popper-class":"[&&]:[--el-text-color-primary:--dialog-list-hover]!",persistent:""},{default:y(()=>[$(t,{style:{cursor:"pointer","font-size":"14px","margin-left":"2px"}},{default:y(()=>[$(N(M))]),_:1})]),_:1},8,["effect","content"])])):(w(),C("div",ae,A(a.label),1))]),default:y(({row:e})=>[T("div",null,["token"===a?.prop?(w(),C("div",te,["WatchWallet"!==N(de).walletName?(w(),_(s,{key:0,name:"bx:bxs-hide",class:"bxs-hide cursor-pointer color-#959a9f overflow-hidden whitespace-nowrap max-w-0 group-hover:max-w-[100px] transition-all duration-500 ease-in-out",onClick:W(a=>function(e){ve.value=!0,be.value=e}(e),["self","stop"])},null,8,["onClick"])):O("",!0),$(F,{row:e,class:"w-24px h-24px mr-8px"},null,8,["row"]),T("div",le,A(e?.symbol),1),e.risk_score>55||e.risk_level<0?(w(),_(s,{key:1,name:"custom:danger",class:"font-14 ml-2px color-#F72121 w-14px h-14px mt-2px"})):O("",!0)])):"--"===e[a.prop]?(w(),C("span",{key:1,class:H(a?.getClassName?a.getClassName(e):"")},"--",2)):0===e[a.prop]?(w(),C("span",{key:2,class:H(a?.getClassName?a.getClassName(e):"")},"0",2)):(w(),C("span",{key:3,class:H(a?.getClassName?a.getClassName(e):"")},A(a.formatter?a.formatter(e):e[a.prop]),3)),"total_profit_ratio"===a?.prop?(w(),C("div",se,[$(o,{address:e.address,statistics:e,chain:e.chain,type:"topHolder"},null,8,["address","statistics","chain"])])):O("",!0)])]),_:2},1032,["label","width","prop","min-width","align","show-overflow-tooltip"]))),128))]),_:1},8,["data"]),$(Q,{modelValue:N(ve),"onUpdate:modelValue":a[0]||(a[0]=e=>J(ve)?ve.value=e:null),row:N(be),self_address:N(_e),onHideToken:()=>{}},null,8,["modelValue","row","self_address"])]),_:3},8,["modelValue","title"])}}}),[["__scopeId","data-v-7f722a44"]]);export{ne as default};
