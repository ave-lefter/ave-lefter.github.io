import{bg as a,aT as t,Q as e,R as s,ac as o,a2 as n,f as r,v as c,g as i,c as l,o as u,U as p,a as d,am as m,K as f,w as g,b as x,J as b,t as v,H as y,d as _,i as h,aO as k,b6 as w,bJ as C,on as $,oo as F,b5 as G,bL as T,_ as B}from"#entry";import{E as D,a as j}from"./CXu7cHRZ.js";import"./Div4Sb7D.js";import"./1bXUUYzG.js";import{E as A}from"./Cxn-ISJb.js";import"./EyvYgUJ0.js";function E(r="add"){const{$i18n:c}=a();return new Promise((i,l)=>{t.prompt("",c.t("enterGroupName"),{confirmButtonText:c.t("confirm1"),cancelButtonText:c.t("cancel"),inputValidator:a=>a?!(a?.length>20)||(l(),c.t("maximum10characters")):(l(),c.t("enterGroupName"))}).then(({value:t})=>{"add"===r?function(t,r,c){const{evmAddress:i}=e(),{address:l}=s(),{$i18n:u}=a(),p=A.service();o(t,i||l).then(()=>{n.success(u.t("success")),r(!0)}).catch(a=>{n.error(u.t("fail")),c()}).finally(()=>{p.close()})}(t,i,l):i(t)})})}const N={class:"w-full px-5px [&&]:text-12px"},z=["onClick"],I=["onClick"],L=B(r({__name:"dialogGroupManage",props:{list:{type:Array,default:()=>[]},getData:{type:Function,default:()=>{}},loading:Boolean},setup(a){const{t:o}=c(),r=e(),B=s(),A=i(()=>r.evmAddress||B.address),L=C(T.FAV_DIALOG),V=a,H=i(()=>V.list.slice(1));async function J(a){const{value:e}=await t.prompt("",o("enterRemark"),{confirmButtonText:o("confirm1"),cancelButtonText:o("cancel"),inputValidator:a=>a?!(a?.length>20)||o("maximum10characters"):o("cannotBeEmpty")});!async function(a,t){try{await w(a,t,A.value),n.success(o("success")),V.getData(),L.emit({type:"changeFavoriteGroupName"})}catch(e){}}(e,a.group_id)}async function M(a,t,e){const s=a.group_id,r=t+e;if(r<0||r+1>H.value.length)return;const c=H.value[r].group_id;try{await F(s,c,A.value),n.success(o("success")),V.getData()}catch(i){n.error(o("fail"))}}async function O(){await E(),V.getData(),L.emit({type:"changeFavoriteGroupName"})}return(e,s)=>{const r=k,c=D,i=y,w=j,C=m;return u(),l("div",N,[p((u(),f(w,{data:h(H),height:"325px",class:"[--el-font-size-base:12px] table-fav-group"},{empty:g(()=>[x(r)]),default:g(()=>[x(c,{label:e.$t("groupName"),prop:"name"},null,8,["label"]),x(c,{label:e.$t("rename"),align:"center"},{default:g(({row:a})=>[d("span",{class:"cursor-pointer",onClick:b(t=>J(a),["stop","prevent"])},v(e.$t("edit")),9,z)]),_:1},8,["label"]),x(c,{prop:"name",label:e.$t("sort"),align:"center"},{default:g(({row:a,$index:t})=>[x(i,{size:"large",link:"",disabled:0===t,onClick:b(e=>async function(a,t){if(0!==t)try{await $(a.group_id,A.value),n.success(o("success")),V.getData()}catch(e){n.error(o("fail"))}}(a,t),["stop"])},{default:g(()=>[_(v(e.$t("top")),1)]),_:1},8,["disabled","onClick"]),x(i,{link:"",size:"large",disabled:0===t,onClick:b(e=>M(a,t,-1),["stop"])},{default:g(()=>[_(v(e.$t("up")),1)]),_:1},8,["disabled","onClick"]),x(i,{link:"",size:"large",disabled:t+1===h(H).length,onClick:b(e=>M(a,t,1),["stop"])},{default:g(()=>[_(v(e.$t("down")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["label"]),x(c,{label:e.$t("operate"),align:"center"},{default:g(({row:a})=>[d("span",{class:"cursor-pointer",onClick:b(e=>async function(a){await t.confirm(o("removeFavGroupTips"),o("tips"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),dangerouslyUseHTMLString:!0,customClass:""});try{await G(a.group_id,A.value),n.success(o("success")),V.getData(),L.emit({type:"removeFavoriteGroup",groupId:a.group_id})}catch(e){}}(a),["stop","prevent"])},v(e.$t("delete")),9,I)]),_:1},8,["label"])]),_:1},8,["data"])),[[C,a.loading]]),d("span",{class:"mt-20px cursor-pointer px-26px py-12px text-14px font-500 radius-6px block text-center color-[--main-text] bg-[--d-3F80F7-l-EAECEF] hover:opacity-80",onClick:O},v(h(o)("newGroup")),1)])}}}),[["__scopeId","data-v-59356406"]]);export{L as default};
