import{f as t,z as e,Q as s,M as a,bU as n,bP as i,bQ as l,R as o,y as r,I as p,r as u,g as c,bT as x,T as m,c as d,o as g,a as h,b,B as v,K as f,C as y,t as w,N as S,b_ as k,i as $,s as B,w as _,F as T,D as V,J as F,G as A,b$ as C,Z as q,U as L,c0 as Q,d as M,a0 as j,c1 as N,bN as U,$ as G}from"#entry";import{S as P}from"./DZrW0QoB.js";const D={class:"items-center inline-flex"},H={class:"w-14px h-14px bg-[--secondary-text] rounded-full flex items-center justify-center"},I={class:"ml-5px mr-5px color-[--secondary-text] text-12px"},K=["src"],R={key:0,class:"ml-20px flex justify-end items-center text-12px"},z={class:"color-[--secondary-text] mr-5px"},E={class:"flex items-center justify-between p-1px rounded-4px text-12px h-28px bg-[--main-input-button-bg] px-2px py-2px"},J=["id","onClick","onMouseenter"],O={class:"text-14px mt-4px mb-4px flex-start"},Z={class:"mr-4px color-[--third-text] text-14px"},W={key:0},X={key:1},Y={key:0,class:"text-14px mt-4px mb-4px flex-start"},tt={class:"mr-4px color-[--third-text] text-14px"},et={key:1,class:"text-14px mt-4px mb-4px flex-start"},st={class:"mr-4px color-[--third-text] text-14px whitespace-nowrap block"},at={class:"whitespace-nowrap"},nt={class:"text-14px mt-4px mb-4px flex-start"},it={class:"mr-4px color-[--third-text] text-14px whitespace-nowrap"},lt={class:"text-14px mt-4px mb-4px flex-start"},ot={class:"mr-4px color-[--third-text] text-14px"},rt=t({__name:"quickSwapSet",props:{chain:{},quickBuyValue:{default:"0.01"},showQuickAmount:{type:Boolean},settingsButtonVisible:{type:Boolean,default:!0}},emits:["update:quickBuyValue"],setup(t,{emit:rt}){e();const pt=s(),ut=a(),ct=n(),xt=i(),mt=l(),dt=o(),gt=rt,ht=t,bt=r(),vt=p(0),ft=u(!1),yt=u("s1"),wt=u({}),St=u(null),kt=c(()=>dt.provider&&dt.address&&!pt.evmAddress),$t=c(()=>ht.chain&&pt.isSupportChains.includes(ht.chain)&&!kt.value),Bt=c(()=>ht.settingsButtonVisible&&!kt.value),_t=c(()=>{const t=ht.chain;if(!pt.isSupportChains.includes(t))return"";const e=xt.botSettings?.[t]?.buy?.[yt.value],s=e?.mev,{gasTip1List:a,gasTip2List:n}=x(ct.gasTip,t),i=s?a:n,l=s?0:1,o=e?.gas[l];return o?.customFee||i?.[o?.level]}),Tt=c({get:()=>ht.quickBuyValue,set(t){gt("update:quickBuyValue",t)}});function Vt(t){t&&t?.id&&(wt.value[t?.id]=t)}function Ft(t){yt.value=t,St.value=wt.value[t]||null,ft.value=!0,function(){const t=ht.chain;if(!Q(t))return;N(t)?.getFeeData().then(t=>{t&&(vt.value=new j(t.gasPrice||0).toNumber())})}()}function At(){const t=ht.chain;if(Q(t)&&pt?.isSupportChains?.includes(t)){const e=xt.botSettings?.[t]?.buy?.[yt.value],s=e?.mev,a=ct.mainTokensPrice?.find(e=>e.chain===t&&e.token===U(t)?.wmain_wrapper)?.current_price_usd||mt.swap.native.price||0,{gasTip1List:n,gasTip2List:i}=x(ct.gasTip,t),l=s?n:i,o=s?e?.gas[0]:e?.gas[1],r=o?.customFee||l?.[o?.level]||"3",p=ct.gasTip?.find?.(e=>e.chain===t&&e.mev===!!s)?.gasLimit||2e5;return G(new j(vt.value).plus(new j(r).times(String(10**9))).times(p).times(a).div(String(10**18)).toFixed(),2)}return 0}return(e,s)=>{const a=y,n=S,i=q,l=m("tooltip");return g(),d("div",D,[h("span",H,[b(a,{class:"color-[--main-bg] text-10px",name:"mynaui:lightning-solid"})]),h("span",I,w(e.$t("quick")),1),b(n,{modelValue:$(Tt),"onUpdate:modelValue":s[0]||(s[0]=t=>B(Tt)?Tt.value=t:null),modelModifiers:{trim:!0},style:{"--el-input-text-color":"var(--main-text)","border-radius":"4px",width:"88px",height:"28px"},placeholder:"0",clearable:"",type:"text",onInput:s[1]||(s[1]=t=>{Tt.value=t.replace(/\-|[^\d.]/g,"")}),onBlur:s[2]||(s[2]=t=>function(t){const e=t,s=new j(e||0)?.toFixed?.().match(new RegExp("[0-9]*(\\.[0-9]{0,4})?"))?.[0]||"";String(e)!==String(s)&&(""===e?Tt.value="":0===Number(s)?Tt.value="0":Tt.value=s)}($(Tt))),onKeydown:s[3]||(s[3]=k(t=>t?.target?.blur(),["enter"]))},{prefix:_(()=>[t.chain?(g(),d("img",{key:0,class:"rounded-full w-14px h-14px mr-4px!",src:`${$(ut).token_logo_url}chain/${t.chain}.png`,alt:"",onerror:"this.src='/icon-default.png'",srcset:""},null,8,K)):v("",!0)]),_:1},8,["modelValue"]),$($t)&&$(Bt)?(g(),d("div",R,[h("span",z,w(e.$t("default")),1),h("div",E,[(g(!0),d(T,null,V("BotSettingsArr"in e?e.BotSettingsArr:$(C),e=>(g(),d("button",{id:e.value,key:e.value,ref_for:!0,ref:Vt,class:A(["cursor-pointer border-none font-400 rounded-4px min-w-36px py-5px px-10px text-center",""+(e.value===$(xt).botSettings?.[t.chain]?.buy?.selected?"color-[--main-text] bg-[--tab-active-bg]":"color-[--secondary-text] bg-transparent")]),type:"button",onClick:F(s=>$(xt).botSettings[t.chain].buy.selected=e.value,["stop"]),onMouseenter:t=>Ft(e.value),onMouseleave:s[4]||(s[4]=t=>ft.value=!1)},w(e.label),43,J))),128))])])):v("",!0),$($t)?(g(),f(P,{key:1,class:"ml-12px",chain:t.chain,setting:$(xt)?.botSettings[t.chain],showQuickAmount:t.showQuickAmount},null,8,["chain","setting","showQuickAmount"])):v("",!0),b(i,{visible:$(ft),"onUpdate:visible":s[5]||(s[5]=t=>B(ft)?ft.value=t:null),"popper-class":"new-popover","virtual-ref":$(St),"virtual-triggering":"",trigger:"contextmenu",placement:"bottom","popper-style":"min-width: auto; width: auto;"},{default:_(()=>[h("ul",null,[h("li",O,[L(b(a,{name:"custom:slippage",class:"text-14px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[l,e.$t("slippage")]]),h("span",Z,w(e.$t("slippage")),1),"auto"!==$(xt).botSettings?.[t.chain]?.buy?.[$(yt)]?.slippage?(g(),d("span",W,w($(xt).botSettings?.[t.chain||""]?.buy?.[$(yt)]?.slippage)+"%",1)):(g(),d("span",X,w(e.$t("auto")),1))]),$(Q)(t.chain||"")?(g(),d("li",Y,[L(b(a,{name:"custom:gas",class:"text-14px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[l,e.$t("estimatedGas")]]),h("span",tt,w(e.$t("estimatedGas")),1),M(" $"+w(At()),1)])):v("",!0),"solana"===t.chain?(g(),d("li",et,[L(b(a,{name:"custom:gas",class:"text-14px color-[--third-text] mr-6px cursor-pointer ml-0"},null,512),[[l,e.$t("priorityFee")]]),h("span",st,w(e.$t("priorityFee")),1),h("span",at,w($(_t))+" SOL",1)])):v("",!0),h("li",nt,[L(b(a,{name:`custom:half-${$(bt).mode}`,class:"text-18px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,8,["name"]),[[l,e.$t("autoSellHalf")]]),h("span",it,w(e.$t("autoSellHalf")),1),M(" "+w($(xt).autoSellConfigs?.autoSell?e.$t("on"):e.$t("off")),1)]),h("li",lt,[L(b(a,{name:"custom:mev",class:"text-16px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[l,e.$t("mev")]]),h("span",ot,w(e.$t("mev")),1),M(" "+w($(xt).botSettings?.[t.chain]?.buy?.[$(yt)]?.mev?e.$t("on"):e.$t("off")),1)])])]),_:1},8,["visible","virtual-ref"])])}}});export{rt as _};
