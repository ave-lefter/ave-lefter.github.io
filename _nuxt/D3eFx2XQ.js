import{f as e,Q as t,y as a,x as l,g as i,bN as s,ak as n,m as o,mH as r,cv as c,al as u,r as m,n as p,bZ as h,bV as b,T as f,c as d,o as x,b as v,w as g,a as y,a4 as w,i as F,U as N,C as S,J as k,t as j,H as $,d as _,B as U,$ as B,G as C,cS as z,s as H,F as L,_ as A}from"#entry";import{_ as M}from"./BmLv6zWf.js";import{_ as T}from"./DRNsqz_Z.js";import{p as R,P as D}from"./DKMoB-dw.js";import{_ as V}from"./CsjroLsq.js";import"./4ZxzSbBH.js";import"./Ci0kdpII.js";import"./C7V9UFRI.js";import"./CZIhrSUn.js";import"./DhoqPgLY.js";import"./DYraDxUd.js";import"./1bXUUYzG.js";const W=["src"],I={class:"w-full h-full py-12px flex flex-col relative group/item"},O={class:"flex relative justify-between items-center h-16px mb-10px px-12px"},P={class:"flex items-center gap-12px opacity-0 group-hover/item:opacity-100 transition-all duration-300"},Z={class:"flex items-center gap-12px opacity-0 group-hover/item:opacity-100 transition-all duration-300"},E={class:"mt--26px flex-1 flex items-center justify-center"},G={key:0,class:"text-center"},J={class:"color-[--white] text-12px lh-18px mb-12px"},Q={key:1,class:"flex flex-1"},Y={class:"flex-1 flex flex-col items-center"},q={class:"flex-1 flex flex-col items-center"},K=A(e({__name:"pnlTracker",setup(e){const A=t(),K=a(),X=l("pnlBoundingRect",{width:480,height:120,x:250,y:250}),ee=l("pnl-setting",{chain:"solana",background:R,blur:0,opacity:100,solUsdSwitch:!1,showU:!1}),te=i(()=>K.footerTokensPrice.find(e=>e.token===s(ee.value.chain).wmain_wrapper)?.current_price_usd||0),ae=l("pnlData",{solana:{initBalance:"0",balance:"0",historyList:[]},bsc:{initBalance:"0",balance:"0",historyList:[]}}),le=i(()=>"0"===ie.value.initBalance),ie=i(()=>ae.value[ee.value.chain]),se=i(()=>Number(ie.value.balance)*te.value),ne=i(()=>Number(ie.value.balance)-Number(ie.value.initBalance)),oe=i(()=>ne.value/Number(ie.value.initBalance)*100),re=n();o(()=>re.wsResult[u.ASSET],async e=>{const t=e.swap&&e.swap.token===r,a=e.transfer&&e.transfer.token===c&&"bsc"===e.transfer.chain;if(t||a){const{type:t,time:a,chain:l}=e.swap||e.transfer,i="0"===t,s=ie.value.balance,n=await de(l,!1),o=ae.value[l].historyList.slice();o.unshift({isBuy:i,amount:Number(n)-Number(s),time:a,balance:n});const r=o.length>50;ae.value[l].historyList=r?o.slice(0,50):o}});const ce=i(()=>{const e=A.userInfo?.addresses;return Array.isArray(e)?Array.from(new Set(e.map(e=>e.address))):[]});o(()=>ce.value,(e,t)=>{0===t?.length&&e.length>0&&ve(),ce.value?.length&&A.subBalanceChange()},{immediate:!0}),o(()=>ee.value.chain,e=>{ae.value[e].historyList=[],de(e,!0)});const ue=(e,t)=>{X.value.x=e,X.value.y=t},me=(e,t)=>{X.value.width=e,X.value.height=t},pe=i(()=>Math.min(X.value.width/300,X.value.height/100)),he=m(!1),be=m(!1);function fe(){A.changeConnectVisible(!0)}async function de(e,t=!1){const a=A.getWalletAddress(e);if(!a)return;const l=await h({chain:e,tokens:[b(e)],walletAddress:a}),i=l?.[0]||{};return ae.value[e].balance=i.balance,t&&(ae.value[e].initBalance=i.balance),i.balance}function xe(e){return Number(e)>0?"color-[--up-color]":Number(e)<0?"color-[--down-color]":"color-[--white]"}function ve(){ae.value[ee.value.chain].historyList=[],de(ee.value.chain,!0)}return p(()=>{de("solana",le.value)}),(e,t)=>{const a=S,l=$,i=M,s=T,n=f("tooltip");return x(),d(L,null,[v(s,{"class-name":"top-0 left-0 fixed draggable z-1000!",initialWidth:F(X).width,"initial-height":F(X).height,x:F(X).x,y:F(X).y,"min-width":300,"min-height":100,parent:!0,handles:["tl","tm","tr","mr","br","bm","bl","ml"],onOnDragStop:ue,onOnResizing:me},{default:g(()=>[y("img",{src:F(ee).background,alt:"background",class:"absolute top-0 left-0 w-full h-full object-cover",style:w({filter:`blur(${F(ee).blur}px) opacity(${F(ee).opacity}%)`})},null,12,W),y("div",I,[y("div",O,[y("div",P,[N(v(a,{name:"custom:pump-setting",class:"cursor-pointer text-12px color-#FFFFFF99",onClick:t[0]||(t[0]=k(e=>be.value=!0,["self"]))},null,512),[[n,e.$t("setting")]]),N(v(a,{name:"custom:history-fill",class:"cursor-pointer text-16px color-#FFFFFF99",onClick:t[1]||(t[1]=k(e=>he.value=!0,["self"]))},null,512),[[n,e.$t("history")]])]),y("div",Z,[N(v(a,{name:"custom:reset2",class:"cursor-pointer text-12px color-#FFFFFF99",onDblclick:k(ve,["self"])},null,512),[[n,e.$t("dbClickReset")]]),v(a,{name:"material-symbols:close",class:"cursor-pointer text-16px color-#FFFFFF99",onClick:t[2]||(t[2]=k(e=>F(K).pnlTrackerVisible=!1,["self"]))})])]),y("div",E,[F(A).evmAddress?(x(),d("div",Q,[y("div",Y,[y("div",{class:"color-[--white] font-bold mb-2px flex items-center gap-4px",style:w({fontSize:16*F(pe)+"px",lineHeight:20*F(pe)+"px"})},[v(i,{chain:F(ee).chain,width:16*F(pe)},null,8,["chain","width"]),_(" "+j(F(ee).solUsdSwitch?"$"+("formatNumber"in e?e.formatNumber:F(B))(F(se),1):("formatNumber"in e?e.formatNumber:F(B))(F(ie).balance,3)),1)],4),F(ee).showU?(x(),d("span",{key:0,class:"color-[--white] mb-2px",style:w({fontSize:10*F(pe)+"px",lineHeight:12*F(pe)+"px"})}," $"+j(("formatNumber"in e?e.formatNumber:F(B))(F(se),1)),5)):U("",!0),y("div",{class:"color-#FFFFFF99",style:w({fontSize:12*F(pe)+"px",lineHeight:16*F(pe)+"px"})},j(e.$t("balance1")),5)]),y("div",q,[y("div",{class:"color-[--white] font-bold mb-2px flex items-center gap-4px",style:w({fontSize:16*F(pe)+"px",lineHeight:20*F(pe)+"px"})},[v(i,{chain:F(ee).chain,width:16*F(pe)},null,8,["chain","width"]),y("span",{class:C(xe(F(ne)))},j(("addSign"in e?e.addSign:F(z))(F(ne)))+j(F(ee).solUsdSwitch?"$"+("formatNumber"in e?e.formatNumber:F(B))(Math.abs(F(ne)*F(te)),1):("formatNumber"in e?e.formatNumber:F(B))(Math.abs(F(ne)),3)),3)],4),F(ee).showU?(x(),d("span",{key:0,class:C(["mb-2px",xe(F(ne))]),style:w({fontSize:10*F(pe)+"px",lineHeight:12*F(pe)+"px"})},j(("addSign"in e?e.addSign:F(z))(F(ne)))+"$"+j(("formatNumber"in e?e.formatNumber:F(B))(Math.abs(F(ne)*F(te)),1)),7)):U("",!0),y("div",{class:C(xe(F(ne))),style:w({fontSize:12*F(pe)+"px",lineHeight:16*F(pe)+"px"})},j(("addSign"in e?e.addSign:F(z))(F(ne)))+j(("formatNumber"in e?e.formatNumber:F(B))(Math.abs(F(oe)),1))+"% ",7)])])):(x(),d("div",G,[y("div",J,j(e.$t("notLogin")),1),v(l,{size:"small",class:"[&&]:[--el-button-border-color:--white] [&&]:[--el-button-hover-text-color:--white] [&&]:[--el-button-hover-border-color:--white] [&&]:[--el-button-hover-bg-color:transparent] [&&]:[--el-button-bg-color:transparent] [&&]:[--el-button-text-color:--white]",onClick:fe},{default:g(()=>[_(j(e.$t("login")),1)]),_:1})]))])])]),_:1},8,["initialWidth","initial-height","x","y"]),v(D,{visible:F(be),"onUpdate:visible":t[3]||(t[3]=e=>H(be)?be.value=e:null),pnlSetting:F(ee),"onUpdate:pnlSetting":t[4]||(t[4]=e=>H(ee)?ee.value=e:null)},null,8,["visible","pnlSetting"]),v(V,{visible:F(he),"onUpdate:visible":t[5]||(t[5]=e=>H(he)?he.value=e:null),chain:F(ee).chain,list:F(ie).historyList,getColorClass:xe},null,8,["visible","chain","list"])],64)}}}),[["__scopeId","data-v-232b2c89"]]);export{K as default};
