import{gr as e,dR as a,en as t,c3 as l,dT as i,dS as n,dU as o,dV as r,dW as s,ey as u,eB as d,cr as m,r as v,g as c,m as p,eT as g,ct as f,p as b,eu as h,ev as V,c7 as w,f as y,c9 as x,j as S,h as k,c as B,o as M,b as C,w as E,a as L,G as P,i as D,t as T,a6 as z,a4 as N,dQ as F,k as I,dZ as X,I as Y,e5 as _,e2 as U,n as K,ej as W,d$ as j,d_ as R,dl as $,K as O,B as A,F as G,D as J,J as Q,cf as Z}from"#entry";import{E as q}from"./CZIhrSUn.js";function H(a,t,l){return void 0===l&&(l=t,t=void 0),void 0!==l&&(l=(l=e(l))==l?l:0),void 0!==t&&(t=(t=e(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(e(a),t,l)}const ee=Symbol("sliderContextKey"),ae=l({modelValue:{type:s([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:d,inputSize:d,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:s(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:s(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:u,default:"top"},marks:{type:s(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...r(["ariaLabel"])}),te=e=>a(e)||t(e)&&e.every(a),le={[o]:te,[n]:te,[i]:te},ie=l({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:u,default:"top"}}),ne={[o]:e=>a(e)},oe=(e,a,t)=>{const{disabled:l,min:i,max:n,step:r,showTooltip:s,persistent:u,precision:d,sliderSize:w,formatTooltip:y,emitChange:x,resetSize:S,updateDragging:k}=m(ee),{tooltip:B,tooltipVisible:M,formatValue:C,displayTooltip:E,hideTooltip:L}=((e,a,t)=>{const l=v(),i=v(!1),n=c(()=>a.value instanceof Function),o=c(()=>n.value&&a.value(e.modelValue)||e.modelValue),r=f(()=>{t.value&&(i.value=!0)},50),s=f(()=>{t.value&&(i.value=!1)},50);return{tooltip:l,tooltipVisible:i,formatValue:o,displayTooltip:r,hideTooltip:s}})(e,y,s),P=v(),D=c(()=>(e.modelValue-i.value)/(n.value-i.value)*100+"%"),T=c(()=>e.vertical?{bottom:D.value}:{left:D.value}),z=e=>{l.value||(e.preventDefault(),I(e),window.addEventListener("mousemove",X),window.addEventListener("touchmove",X),window.addEventListener("mouseup",Y),window.addEventListener("touchend",Y),window.addEventListener("contextmenu",Y),P.value.focus())},N=e=>{l.value||(a.newPosition=Number.parseFloat(D.value)+e/(n.value-i.value)*100,_(a.newPosition),x())},F=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},I=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=F(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(D.value),a.newPosition=a.startPosition},X=t=>{if(a.dragging){let l;a.isClick=!1,E(),S();const{clientX:i,clientY:n}=F(t);e.vertical?(a.currentY=n,l=(a.startY-a.currentY)/w.value*100):(a.currentX=i,l=(a.currentX-a.startX)/w.value*100),a.newPosition=a.startPosition+l,_(a.newPosition)}},Y=()=>{a.dragging&&(setTimeout(()=>{a.dragging=!1,a.hovering||L(),a.isClick||_(a.newPosition),x()},0),window.removeEventListener("mousemove",X),window.removeEventListener("touchmove",X),window.removeEventListener("mouseup",Y),window.removeEventListener("touchend",Y),window.removeEventListener("contextmenu",Y))},_=async l=>{if(null===l||Number.isNaN(+l))return;l=H(l,0,100);const s=Math.floor((n.value-i.value)/r.value),u=s*r.value/(n.value-i.value)*100,m=u+(100-u)/2;let v;if(l<u){const e=u/s,a=Math.round(l/e);v=i.value+a*r.value}else v=l<m?i.value+s*r.value:n.value;v=Number.parseFloat(v.toFixed(d.value)),v!==e.modelValue&&t(o,v),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await b(),a.dragging&&E(),B.value.updatePopper()};return p(()=>a.dragging,e=>{k(e)}),g(P,"touchstart",z,{passive:!1}),{disabled:l,button:P,tooltip:B,tooltipVisible:M,showTooltip:s,persistent:u,wrapperStyle:T,formatValue:C,handleMouseEnter:()=>{a.hovering=!0,E()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||L()},onButtonDown:z,onKeyDown:e=>{let a=!0;switch(h(e)){case V.left:case V.down:N(-r.value);break;case V.right:case V.up:N(r.value);break;case V.home:l.value||(_(0),x());break;case V.end:l.value||(_(100),x());break;case V.pageDown:N(4*-r.value);break;case V.pageUp:N(4*r.value);break;default:a=!1}a&&e.preventDefault()},setPosition:_}},re=y({name:"ElSliderButton"});var se=w(y({...re,props:ie,emits:ne,setup(e,{expose:a,emit:t}){const l=e,i=x("slider"),n=S({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),o=c(()=>!!d.value&&m.value),{disabled:r,button:s,tooltip:u,showTooltip:d,persistent:m,tooltipVisible:v,wrapperStyle:p,formatValue:g,handleMouseEnter:f,handleMouseLeave:b,onButtonDown:h,onKeyDown:V,setPosition:w}=oe(l,n,t),{hovering:y,dragging:F}=k(n);return a({onButtonDown:h,onKeyDown:V,setPosition:w,hovering:y,dragging:F}),(e,a)=>(M(),B("div",{ref_key:"button",ref:s,class:P([D(i).e("button-wrapper"),{hover:D(y),dragging:D(F)}]),style:N(D(p)),tabindex:D(r)?-1:0,onMouseenter:D(f),onMouseleave:D(b),onMousedown:D(h),onFocus:D(f),onBlur:D(b),onKeydown:D(V)},[C(D(z),{ref_key:"tooltip",ref:u,visible:D(v),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!D(d),persistent:D(o)},{content:E(()=>[L("span",null,T(D(g)),1)]),default:E(()=>[L("div",{class:P([D(i).e("button"),{hover:D(y),dragging:D(F)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}}),[["__file","button.vue"]]);var ue=y({name:"ElSliderMarker",props:l({mark:{type:s([String,Object]),default:void 0}}),setup(e){const a=x("slider"),t=c(()=>F(e.mark)?e.mark:e.mark.label),l=c(()=>F(e.mark)?void 0:e.mark.style);return()=>I("div",{class:a.e("marks-text"),style:l.value},t.value)}});const de=(e,a,t)=>{const{form:l,formItem:r}=X(),s=Y(),u=v(),d=v(),m={firstButton:u,secondButton:d},p=c(()=>e.disabled||(null==l?void 0:l.disabled)||!1),g=c(()=>Math.min(a.firstValue,a.secondValue)),f=c(()=>Math.max(a.firstValue,a.secondValue)),h=c(()=>e.range?100*(f.value-g.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%"),V=c(()=>e.range?100*(g.value-e.min)/(e.max-e.min)+"%":"0%"),w=c(()=>e.vertical?{height:e.height}:{}),y=c(()=>e.vertical?{height:h.value,bottom:V.value}:{width:h.value,left:V.value}),x=()=>{if(s.value){const t=s.value.getBoundingClientRect();a.sliderSize=t[e.vertical?"height":"width"]}},S=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return u;let i;return i=Math.abs(g.value-l)<Math.abs(f.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",m[i]})(t);return l.value.setPosition(t),l},k=e=>{t(o,e),t(n,e)},B=async()=>{await b(),t(i,e.range?[g.value,f.value]:e.modelValue)},M=t=>{var l,i,n,o,r,u;if(p.value||a.dragging)return;x();let d=0;if(e.vertical){const e=null!=(n=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?n:t.clientY;d=(s.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(r=null==(o=t.touches)?void 0:o.item(0))?void 0:r.clientX)?u:t.clientX)-s.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:S(d)};return{elFormItem:r,slider:s,firstButton:u,secondButton:d,sliderDisabled:p,minValue:g,maxValue:f,runwayStyle:w,barStyle:y,resetSize:x,setPosition:S,emitChange:B,onSliderWrapperPrevent:e=>{var a,t;((null==(a=m.firstButton.value)?void 0:a.dragging)||(null==(t=m.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{M(e)&&B()},onSliderDown:async e=>{const a=M(e);a&&(await b(),a.value.onButtonDown(e))},onSliderMarkerDown:e=>{if(p.value||a.dragging)return;S(e)&&B()},setFirstValue:t=>{a.firstValue=null!=t?t:e.min,k(e.range?[g.value,f.value]:null!=t?t:e.min)},setSecondValue:t=>{a.secondValue=t,e.range&&k([g.value,f.value])}}},me=y({name:"ElSlider"});const ve=Z(w(y({...me,props:ae,emits:le,setup(e,{expose:l,emit:i}){const r=e,s=x("slider"),{t:u}=W(),d=S({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:m,slider:f,firstButton:h,secondButton:V,sliderDisabled:w,minValue:y,maxValue:E,runwayStyle:T,barStyle:z,resetSize:F,emitChange:I,onSliderWrapperPrevent:X,onSliderClick:Y,onSliderDown:Z,onSliderMarkerDown:H,setFirstValue:ae,setSecondValue:te}=de(r,d,i),{stops:le,getStopStyle:ie}=((e,a,t,l)=>({stops:c(()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=Math.ceil((e.max-e.min)/e.step),n=100*e.step/(e.max-e.min),o=Array.from({length:i-1}).map((e,a)=>(a+1)*n);return e.range?o.filter(a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min)):o.filter(t=>t>100*(a.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(r,d,y,E),{inputId:ne,isLabeledByFormItem:oe}=j(r,{formItemContext:m}),re=R(),me=c(()=>r.inputSize||re.value),ve=c(()=>r.ariaLabel||u("el.slider.defaultLabel",{min:r.min,max:r.max})),ce=c(()=>r.range?r.rangeStartLabel||u("el.slider.defaultRangeStartLabel"):ve.value),pe=c(()=>r.formatValueText?r.formatValueText(ye.value):`${ye.value}`),ge=c(()=>r.rangeEndLabel||u("el.slider.defaultRangeEndLabel")),fe=c(()=>r.formatValueText?r.formatValueText(xe.value):`${xe.value}`),be=c(()=>[s.b(),s.m(re.value),s.is("vertical",r.vertical),{[s.m("with-input")]:r.showInput}]),he=(e=>c(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((e,a)=>e-a).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]})):[]))(r);((e,l,i,r,s,u)=>{const d=e=>{s(o,e),s(n,e)},m=()=>e.range?![i.value,r.value].every((e,a)=>e===l.oldValue[a]):e.modelValue!==l.oldValue,v=()=>{var i,n;e.min>e.max&&_("Slider","min should not be greater than max.");const o=e.modelValue;e.range&&t(o)?o[1]<e.min?d([e.min,e.min]):o[0]>e.max?d([e.max,e.max]):o[0]<e.min?d([e.min,o[1]]):o[1]>e.max?d([o[0],e.max]):(l.firstValue=o[0],l.secondValue=o[1],m()&&(e.validateEvent&&(null==(i=null==u?void 0:u.validate)||i.call(u,"change").catch(e=>U())),l.oldValue=o.slice())):e.range||!a(o)||Number.isNaN(o)||(o<e.min?d(e.min):o>e.max?d(e.max):(l.firstValue=o,m()&&(e.validateEvent&&(null==(n=null==u?void 0:u.validate)||n.call(u,"change").catch(e=>U())),l.oldValue=o)))};v(),p(()=>l.dragging,e=>{e||v()}),p(()=>e.modelValue,(e,a)=>{l.dragging||t(e)&&t(a)&&e.every((e,t)=>e===a[t])&&l.firstValue===e[0]&&l.secondValue===e[1]||v()},{deep:!0}),p(()=>[e.min,e.max],()=>{v()})})(r,d,y,E,i,m);const Ve=c(()=>{const e=[r.min,r.max,r.step].map(e=>{const a=`${e}`.split(".")[1];return a?a.length:0});return Math.max.apply(null,e)}),{sliderWrapper:we}=((e,l,i)=>{const n=v();return K(async()=>{e.range?(t(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(!a(e.modelValue)||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),g(window,"resize",i),await b(),i()}),{sliderWrapper:n}})(r,d,F),{firstValue:ye,secondValue:xe,sliderSize:Se}=k(d);return g(we,"touchstart",X,{passive:!1}),g(we,"touchmove",X,{passive:!1}),$(ee,{...k(r),sliderSize:Se,disabled:w,precision:Ve,emitChange:I,resetSize:F,updateDragging:e=>{d.dragging=e}}),l({onSliderClick:Y}),(e,a)=>{var t,l;return M(),B("div",{id:e.range?D(ne):void 0,ref_key:"sliderWrapper",ref:we,class:P(D(be)),role:e.range?"group":void 0,"aria-label":e.range&&!D(oe)?D(ve):void 0,"aria-labelledby":e.range&&D(oe)?null==(t=D(m))?void 0:t.labelId:void 0},[L("div",{ref_key:"slider",ref:f,class:P([D(s).e("runway"),{"show-input":e.showInput&&!e.range},D(s).is("disabled",D(w))]),style:N(D(T)),onMousedown:D(Z),onTouchstartPassive:D(Z)},[L("div",{class:P(D(s).e("bar")),style:N(D(z))},null,6),C(se,{id:e.range?void 0:D(ne),ref_key:"firstButton",ref:h,"model-value":D(ye),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!D(oe)?D(ce):void 0,"aria-labelledby":!e.range&&D(oe)?null==(l=D(m))?void 0:l.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?D(xe):e.max,"aria-valuenow":D(ye),"aria-valuetext":D(pe),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":D(w),"onUpdate:modelValue":D(ae)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(M(),O(se,{key:0,ref_key:"secondButton",ref:V,"model-value":D(xe),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":D(ge),"aria-valuemin":D(ye),"aria-valuemax":e.max,"aria-valuenow":D(xe),"aria-valuetext":D(fe),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":D(w),"onUpdate:modelValue":D(te)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):A("v-if",!0),e.showStops?(M(),B("div",{key:1},[(M(!0),B(G,null,J(D(le),(e,a)=>(M(),B("div",{key:a,class:P(D(s).e("stop")),style:N(D(ie)(e))},null,6))),128))])):A("v-if",!0),D(he).length>0?(M(),B(G,{key:2},[L("div",null,[(M(!0),B(G,null,J(D(he),(e,a)=>(M(),B("div",{key:a,style:N(D(ie)(e.position)),class:P([D(s).e("stop"),D(s).e("marks-stop")])},null,6))),128))]),L("div",{class:P(D(s).e("marks"))},[(M(!0),B(G,null,J(D(he),(e,a)=>(M(),O(D(ue),{key:a,mark:e.mark,style:N(D(ie)(e.position)),onMousedown:Q(a=>D(H)(e.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):A("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),e.showInput&&!e.range?(M(),O(D(q),{key:0,ref:"input","model-value":D(ye),class:P(D(s).e("input")),step:e.step,disabled:D(w),controls:e.showInputControls,min:e.min,max:e.max,precision:D(Ve),size:D(me),"onUpdate:modelValue":D(ae),onChange:D(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):A("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}}),[["__file","slider.vue"]]));export{ve as E,H as c};
