import{c3 as e,e7 as a,dW as t,c7 as l,f as s,cr as n,e5 as o,c9 as r,r as u,m as i,p as c,ec as v,b1 as d,c as b,o as p,a4 as f,G as m,i as h,c2 as g,gI as y,gJ as w,I as R,g as P,gK as $,n as x,eU as C,cL as N,b as k,by as T,f5 as E,eX as B,eb as S,eu as A,ev as F,dQ as L,dR as j,fv as V,bR as _,fg as I,dU as K,l as M,dl as U,c8 as W,gL as z,j as O,gM as X,U as q,B as G,bh as H,cf as J,eI as Q}from"#entry";import{u as Y,e as D}from"./BbcemesW.js";import{c as Z}from"./DMZvEsQv.js";import{c as ee}from"./C7V9UFRI.js";const ae=Symbol("tabsRootContextKey"),te=e({tabs:{type:t(Array),default:()=>a([])},tabRefs:{type:t(Object),default:()=>a({})}}),le="ElTabBar",se=s({name:le});var ne=l(s({...se,props:te,setup(e,{expose:a}){const t=e,l=n(ae);l||o(le,"<el-tabs><el-tab-bar /></el-tabs>");const s=r("tabs"),y=u(),w=u(),R=()=>w.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(g(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${Z(o)}`],a=n[`client${Z(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${Z(n)}(${e}px)`}})(),P=[];i(()=>t.tabs,async()=>{await c(),R(),P.forEach(e=>e.stop()),P.length=0,Object.values(t.tabRefs).forEach(e=>{P.push(v(e,R))})},{immediate:!0});const $=v(y,()=>R());return d(()=>{P.forEach(e=>e.stop()),P.length=0,$.stop()}),a({ref:y,update:R}),(e,a)=>(p(),b("div",{ref_key:"barRef",ref:y,class:m([h(s).e("active-bar"),h(s).is(h(l).props.tabPosition)]),style:f(w.value)},null,6))}}),[["__file","tab-bar.vue"]]);const oe=e({panes:{type:t(Array),default:()=>a([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),re="ElTabNav",ue=s({name:re,props:oe,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=n(ae);l||o(re,"<el-tabs><tab-nav /></el-tabs>");const s=r("tabs"),d=y(),b=w(),p=u(),f=u(),m=u(),h=u({}),g=u(),L=u(!1),j=u(0),V=u(!1),_=u(!0),I=R(),K=P(()=>["top","bottom"].includes(l.props.tabPosition)),M=P(()=>K.value?"width":"height"),U=P(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${j.value}px)`})),{width:W,height:z}=$(p),{width:O,height:X}=$(f,{width:0,height:0},{box:"border-box"}),q=P(()=>K.value?W.value:z.value),G=P(()=>K.value?O.value:X.value),{onWheel:H}=Y({atStartEdge:P(()=>j.value<=0),atEndEdge:P(()=>G.value-j.value<=q.value),layout:P(()=>K.value?"horizontal":"vertical")},e=>{j.value=ee(j.value+e,0,G.value-q.value)}),J=()=>{if(!p.value)return;const e=p.value[`offset${Z(M.value)}`],a=j.value;if(!a)return;const t=a>e?a-e:0;j.value=t},Q=()=>{if(!p.value||!f.value)return;const e=f.value[`offset${Z(M.value)}`],a=p.value[`offset${Z(M.value)}`],t=j.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;j.value=l},D=async()=>{const a=f.value;if(!(L.value&&m.value&&p.value&&a))return;await c();const t=h.value[e.currentName];if(!t)return;const l=p.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=j.value;let u=r;K.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),j.value=Math.min(u,o)},te=()=>{var a;if(!f.value||!p.value)return;e.stretch&&(null==(a=g.value)||a.update());const t=f.value[`offset${Z(M.value)}`],l=p.value[`offset${Z(M.value)}`],s=j.value;l<t?(L.value=L.value||{},L.value.prev=s,L.value.next=s+l<t,t-s<l&&(j.value=t-l)):(L.value=!1,s>0&&(j.value=0))},le=e=>{let a=0;switch(A(e)){case F.left:case F.up:a=-1;break;case F.right:case F.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),se()},se=()=>{_.value&&(V.value=!0)},oe=()=>V.value=!1;return i(d,e=>{"hidden"===e?_.value=!1:"visible"===e&&setTimeout(()=>_.value=!0,50)}),i(b,e=>{e?setTimeout(()=>_.value=!0,50):_.value=!1}),v(m,te),x(()=>setTimeout(()=>D(),0)),C(()=>te()),a({scrollToActiveTab:D,removeFocus:oe,focusActiveTab:async()=>{await c();const a=h.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:f,tabBarRef:g,scheduleRender:()=>N(I)}),()=>{const a=L.value?[k("span",{class:[s.e("nav-prev"),s.is("disabled",!L.value.prev)],onClick:J},[k(T,null,{default:()=>[k(E,null,null)]})]),k("span",{class:[s.e("nav-next"),s.is("disabled",!L.value.next)],onClick:Q},[k(T,null,{default:()=>[k(B,null,null)]})])]:null,n=e.panes.map((a,n)=>{var o,r,u,i;const c=a.uid,v=a.props.disabled,d=null!=(r=null!=(o=a.props.name)?o:a.index)?r:`${n}`,b=!v&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${n}`;const p=b?k(T,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[k(S,null,null)]}):null,f=(null==(i=(u=a.slots).label)?void 0:i.call(u))||a.props.label,m=!v&&a.active?0:-1;return k("div",{ref:e=>((e,a)=>{h.value[a]=e})(e,d),class:[s.e("item"),s.is(l.props.tabPosition),s.is("active",a.active),s.is("disabled",v),s.is("closable",b),s.is("focus",V.value)],id:`tab-${d}`,key:`tab-${c}`,"aria-controls":`pane-${d}`,role:"tab","aria-selected":a.active,tabindex:m,onFocus:()=>se(),onBlur:()=>oe(),onClick:e=>{oe(),t("tabClick",a,d,e)},onKeydown:e=>{const l=A(e);!b||l!==F.delete&&l!==F.backspace||t("tabRemove",a,e)}},[f,p])});return I.value,k("div",{ref:m,class:[s.e("nav-wrap"),s.is("scrollable",!!L.value),s.is(l.props.tabPosition)]},[a,k("div",{class:s.e("nav-scroll"),ref:p},[e.panes.length>0?k("div",{class:[s.e("nav"),s.is(l.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:f,style:U.value,role:"tablist",onKeydown:le,onWheel:H},[e.type?null:k(ne,{ref:g,tabs:[...e.panes],tabRefs:h.value},null),n]):null])])}}}),ie=e({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:t(Function),default:()=>!0},stretch:Boolean}),ce=e=>L(e)||j(e);var ve=s({name:"ElTabs",props:ie,emits:{[K]:e=>ce(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ce(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ce(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=r("tabs"),o=P(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:d,removeChild:b,ChildrenSorter:p}=D(M(),"ElTabPane"),f=u(),m=u(null!=(s=e.modelValue)?s:"0"),h=async(t,l=!1)=>{var s,n,o,r;if(m.value!==t&&!g(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,m.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=v.value.find(e=>e.paneName===m.value))?void 0:s.isFocusInsidePane();m.value=t,l&&(a(K,t),a("tabChange",t)),null==(o=null==(n=f.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(r=f.value)||r.focusActiveTab())}}catch(u){}},y=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),h(t,!0))},w=(e,t)=>{e.props.disabled||g(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},R=()=>{a("edit",void 0,"add"),a("tabAdd")},$=e=>{const a=A(e);[F.enter,F.numpadEnter].includes(a)&&R()},x=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return i(()=>e.modelValue,e=>h(e)),i(m,async()=>{var e;await c(),null==(e=f.value)||e.scrollToActiveTab()}),U(ae,{props:e,currentName:m,registerPane:d,unregisterPane:b,nav$:f}),l({currentName:m,get tabNavRef(){return V(f.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?k("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:R,onKeydown:$},[a?_(t,"add-icon"):k(T,{class:n.is("icon-plus")},{default:()=>[k(I,null,null)]})]):null,s=k("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[k(p,null,{default:()=>k(ue,{ref:f,currentName:m.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:y,onTabRemove:w},null),$stable:!0}),l]),r=k("div",{class:n.e("content")},[_(t,"default")]);return k("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:x,onVnodeUpdated:x},[r,s])}}});const de=e({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),be="ElTabPane",pe=s({name:be});var fe=l(s({...pe,props:de,setup(e){const a=e,t=M(),l=W(),s=n(ae);s||o(be,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const c=r("tab-pane"),v=u(),f=u(),g=P(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),y=z(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:f.value)}),w=u(y.value),R=P(()=>{var e;return null!=(e=a.name)?e:f.value}),$=z(()=>!a.lazy||w.value||y.value);i(y,e=>{e&&(w.value=!0)});const x=O({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:R,active:y,index:f,isClosable:g,isFocusInsidePane:()=>{var e;return null==(e=v.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(x),d(()=>{s.unregisterPane(x)}),X(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>h($)?q((p(),b("div",{key:0,id:`pane-${h(R)}`,ref_key:"paneRef",ref:v,class:m(h(c).b()),role:"tabpanel","aria-hidden":!h(y),"aria-labelledby":`tab-${h(R)}`},[_(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[H,h(y)]]):G("v-if",!0)}}),[["__file","tab-pane.vue"]]);const me=J(ve,{TabPane:fe}),he=Q(fe);export{me as E,he as a};
