import{c3 as e,dW as a,cc as l,I as t,g as o,c9 as r,r as n,n as s,m as i,e1 as u,eu as c,ev as d,l as v,f_ as p,c7 as h,f,ej as b,c as m,o as g,a as y,i as k,a4 as _,G as w,dQ as V,fd as C,dU as x,f$ as S,eW as E,F as B,D as K,cr as $,eq as A,j as L,e0 as F,p as R,dl as D,K as M,B as H,b as O,bR as P,N as T,cf as W,dT as z,dV as j,ew as q,ex as I,eB as U,dZ as G,d_ as N,ek as X,d$ as Y,em as Q,g0 as Z,g1 as J,ct as ee,w as ae,at as le,U as te,by as oe,ez as re,bh as ne,eb as se,b_ as ie,H as ue,d as ce,t as de,eG as ve,a6 as pe,e2 as he}from"#entry";const fe=e({color:{type:a(Object),required:!0},vertical:Boolean,disabled:Boolean}),be=fe;let me=!1;function ge(e,a){if(!l)return;const t=function(e){var l;null==(l=a.drag)||l.call(a,e)},o=function(e){var l;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",o),document.onselectstart=null,document.ondragstart=null,me=!1,null==(l=a.end)||l.call(a,e)},r=function(e){var l;me||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",o),document.addEventListener("touchmove",t),document.addEventListener("touchend",o),me=!0,null==(l=a.start)||l.call(a,e))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!1})}const ye=(e,{key:a,minValue:l,maxValue:r})=>{const n=v(),s=t(),i=t(),u=o(()=>e.color.get(a));function h(l){if(!i.value||!s.value||e.disabled)return;const t=n.vnode.el.getBoundingClientRect(),{clientX:o,clientY:u}=p(l);let c;if(e.vertical){let e=u-t.top;e=Math.max(s.value.offsetHeight/2,e),e=Math.min(e,t.height-s.value.offsetHeight/2),c=Math.round((e-s.value.offsetHeight/2)/(t.height-s.value.offsetHeight)*r)}else{let e=o-t.left;e=Math.max(s.value.offsetWidth/2,e),e=Math.min(e,t.width-s.value.offsetWidth/2),c=Math.round((e-s.value.offsetWidth/2)/(t.width-s.value.offsetWidth)*r)}e.color.set(a,c)}function f(t){let o=u.value+t;o=o<l?l:o>r?r:o,e.color.set(a,o)}return{thumb:s,bar:i,currentValue:u,handleDrag:h,handleClick:function(a){var l;if(e.disabled)return;a.target!==s.value&&h(a),null==(l=s.value)||l.focus()},handleKeydown:function(t){if(e.disabled)return;const{shiftKey:o}=t,n=c(t),s=o?10:1,i="hue"===a?-1:1;let u=!0;switch(n){case d.left:case d.down:f(-s*i);break;case d.right:case d.up:f(s*i);break;case d.home:e.color.set(a,"hue"===a?r:l);break;case d.end:e.color.set(a,"hue"===a?l:r);break;case d.pageDown:f(-4*i);break;case d.pageUp:f(4*i);break;default:u=!1}u&&t.preventDefault()}}},ke=(e,{namespace:a,maxValue:l,bar:t,thumb:c,currentValue:d,handleDrag:p,getBackground:h})=>{const f=v(),b=r(a),m=n(0),g=n(0),y=n();function k(){m.value=function(){if(!c.value)return 0;if(e.vertical)return 0;const a=f.vnode.el,t=d.value;return a?Math.round(t*(a.offsetWidth-c.value.offsetWidth/2)/l):0}(),g.value=function(){if(!c.value)return 0;const a=f.vnode.el;if(!e.vertical)return 0;const t=d.value;return a?Math.round(t*(a.offsetHeight-c.value.offsetHeight/2)/l):0}(),y.value=null==h?void 0:h()}s(()=>{if(!t.value||!c.value)return;const e={drag:e=>{p(e)},end:e=>{p(e)}};ge(t.value,e),ge(c.value,e),k()}),i(d,()=>k()),i(()=>e.color.value,()=>k());const _=o(()=>[b.b(),b.is("vertical",e.vertical),b.is("disabled",e.disabled)]),w=o(()=>b.e("bar")),V=o(()=>b.e("thumb"));return{rootKls:_,barKls:w,barStyle:o(()=>({background:y.value})),thumbKls:V,thumbStyle:o(()=>({left:u(m.value),top:u(g.value)})),thumbLeft:m,thumbTop:g,update:k}},_e=f({name:"ElColorAlphaSlider"});var we=h(f({..._e,props:fe,setup(e,{expose:a}){const l=e,{currentValue:t,bar:r,thumb:n,handleDrag:s,handleClick:i,handleKeydown:u}=ye(l,{key:"alpha",minValue:0,maxValue:100}),{rootKls:c,barKls:d,barStyle:v,thumbKls:p,thumbStyle:h,update:f}=ke(l,{namespace:"color-alpha-slider",maxValue:100,currentValue:t,bar:r,thumb:n,handleDrag:s,getBackground:function(){if(l.color&&l.color.value){const{r:e,g:a,b:t}=l.color.toRgb();return`linear-gradient(to right, rgba(${e}, ${a}, ${t}, 0) 0%, rgba(${e}, ${a}, ${t}, 1) 100%)`}return""}}),{t:V}=b(),C=o(()=>V("el.colorpicker.alphaLabel")),x=o(()=>V("el.colorpicker.alphaDescription",{alpha:t.value,color:l.color.value}));return a({update:f,bar:r,thumb:n}),(e,a)=>(g(),m("div",{class:w(k(c))},[y("div",{ref_key:"bar",ref:r,class:w(k(d)),style:_(k(v)),onClick:k(i)},null,14,["onClick"]),y("div",{ref_key:"thumb",ref:n,class:w(k(p)),style:_(k(h)),"aria-label":k(C),"aria-valuenow":k(t),"aria-valuetext":k(x),"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,role:"slider",tabindex:"0",onKeydown:k(u)},null,46,["aria-label","aria-valuenow","aria-valuetext","aria-orientation","onKeydown"])],2))}}),[["__file","alpha-slider.vue"]]);const Ve=f({name:"ElColorHueSlider"});var Ce=h(f({...Ve,props:be,setup(e,{expose:a}){const l=e,{currentValue:t,bar:r,thumb:n,handleDrag:s,handleClick:i,handleKeydown:u}=ye(l,{key:"hue",minValue:0,maxValue:360}),{rootKls:c,barKls:d,thumbKls:v,thumbStyle:p,thumbTop:h,update:f}=ke(l,{namespace:"color-hue-slider",maxValue:360,currentValue:t,bar:r,thumb:n,handleDrag:s}),{t:V}=b(),C=o(()=>V("el.colorpicker.hueLabel")),x=o(()=>V("el.colorpicker.hueDescription",{hue:t.value,color:l.color.value}));return a({bar:r,thumb:n,thumbTop:h,update:f}),(e,a)=>(g(),m("div",{class:w(k(c))},[y("div",{ref_key:"bar",ref:r,class:w(k(d)),onClick:k(i)},null,10,["onClick"]),y("div",{ref_key:"thumb",ref:n,class:w(k(v)),style:_(k(p)),"aria-label":k(C),"aria-valuenow":k(t),"aria-valuetext":k(x),"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":360,role:"slider",tabindex:"0",onKeydown:k(u)},null,46,["aria-label","aria-valuenow","aria-valuetext","aria-orientation","onKeydown"])],2))}}),[["__file","hue-slider.vue"]]);const xe=e({modelValue:{type:a(String),default:void 0},border:{type:Boolean,default:!0},showAlpha:Boolean,colorFormat:String,disabled:Boolean,predefine:{type:a(Array)}}),Se={[x]:e=>V(e)||C(e)},Ee=Symbol("colorCommonPickerKey"),Be=Symbol("colorPickerPanelContextKey");class Ke{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new S,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const a in e)E(e,a)&&(this[a]=e[a]);e.value?this.fromString(e.value):this.doOnChange()}set(e,a){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=a,this._isValid=!0,this.doOnChange();else for(const l in e)E(e,l)&&this.set(l,e[l])}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const a=new S(e);if(this._isValid=a.isValid,a.isValid){const{h:e,s:l,v:t,a:o}=a.toHsv();this._hue=e,this._saturation=100*l,this._value=100*t,this._alpha=100*o}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}clear(){this._isValid=!1,this.value="",this._hue=0,this._saturation=100,this._value=100,this._alpha=100}compare(e){const a=new S({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(a)}doOnChange(){const{_hue:e,_saturation:a,_value:l,_alpha:t,format:o,enableAlpha:r}=this;let n=o||(r?"rgb":"hex");"hex"===o&&r&&(n="hex8"),this._tiny=new S({h:e,s:a/100,v:l/100,a:t/100}),this.value=this._isValid?this._tiny.toString(n):""}}var $e=h(f({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0},disabled:Boolean},setup(e){const a=r("color-predefine"),{currentColor:l}=$(Be),t=n(o(e.colors,e.color));function o(e,a){return e.map(e=>{const l=new Ke({value:e});return l.selected=l.compare(a),l})}return i(()=>l.value,e=>{const a=new Ke({value:e});t.value.forEach(e=>{e.selected=a.compare(e)})}),A(()=>{t.value=o(e.colors,e.color)}),{rgbaColors:t,handleSelect:function(a){e.disabled||e.color.fromString(e.colors[a])},ns:a}}}),[["render",function(e,a,l,t,o,r){return g(),m("div",{class:w(e.ns.b())},[y("div",{class:w(e.ns.e("colors"))},[(g(!0),m(B,null,K(e.rgbaColors,(a,l)=>(g(),m("div",{key:e.colors[l],class:w([e.ns.e("color-selector"),e.ns.is("alpha",a.get("alpha")<100),{selected:a.selected}]),onClick:a=>e.handleSelect(l)},[y("div",{style:_({backgroundColor:a.value})},null,4)],10,["onClick"]))),128))],2)],2)}],["__file","predefine.vue"]]);var Ae=h(f({name:"ElSlPanel",props:{color:{type:Object,required:!0},disabled:Boolean},setup(e){const a=r("color-svpanel"),l=v(),t=n(0),u=n(0),c=n("hsl(0, 100%, 50%)"),d=o(()=>({hue:e.color.get("hue"),value:e.color.get("value")}));function h(){const a=e.color.get("saturation"),o=e.color.get("value"),r=l.vnode.el,{clientWidth:n,clientHeight:s}=r;u.value=a*n/100,t.value=(100-o)*s/100,c.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function f(a){if(e.disabled)return;const o=l.vnode.el.getBoundingClientRect(),{clientX:r,clientY:n}=p(a);let s=r-o.left,i=n-o.top;s=Math.max(0,s),s=Math.min(s,o.width),i=Math.max(0,i),i=Math.min(i,o.height),u.value=s,t.value=i,e.color.set({saturation:s/o.width*100,value:100-i/o.height*100})}return i(()=>d.value,()=>{h()}),s(()=>{ge(l.vnode.el,{drag:e=>{f(e)},end:e=>{f(e)}}),h()}),{cursorTop:t,cursorLeft:u,background:c,colorValue:d,handleDrag:f,update:h,ns:a}}}),[["render",function(e,a,l,t,o,r){return g(),m("div",{class:w(e.ns.b()),style:_({backgroundColor:e.background})},[y("div",{class:w(e.ns.e("white"))},null,2),y("div",{class:w(e.ns.e("black"))},null,2),y("div",{class:w(e.ns.e("cursor")),style:_({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[y("div")],6)],6)}],["__file","sv-panel.vue"]]);const Le=(e,a)=>{const l=L(new Ke({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue}));return i(()=>[e.colorFormat,e.showAlpha],()=>{l.enableAlpha=e.showAlpha,l.format=e.colorFormat||l.format,l.doOnChange(),a(x,l.value)}),{color:l}},Fe=f({name:"ElColorPickerPanel"});const Re=W(h(f({...Fe,props:xe,emits:Se,setup(e,{expose:a,emit:l}){const t=e,u=r("color-picker-panel"),c=F(),d=n(),v=n(),p=n(),h=n(),f=n(""),{color:b}=$(Ee,()=>Le(t,l),!0);function _(){b.fromString(f.value),b.value!==f.value&&(f.value=b.value)}function V(){var e,a,l;null==(e=d.value)||e.update(),null==(a=v.value)||a.update(),null==(l=p.value)||l.update()}return s(()=>{t.modelValue&&(f.value=b.value),R(V)}),i(()=>t.modelValue,e=>{e!==b.value&&(e?b.fromString(e):b.clear())}),i(()=>b.value,e=>{l(x,e),f.value=e}),D(Be,{currentColor:o(()=>b.value)}),a({color:b,inputRef:h,update:V}),(e,a)=>(g(),m("div",{class:w([k(u).b(),k(u).is("disabled",k(c)),k(u).is("border",e.border)])},[y("div",{class:w(k(u).e("wrapper"))},[O(Ce,{ref_key:"hueRef",ref:d,class:"hue-slider",color:k(b),vertical:"",disabled:k(c)},null,8,["color","disabled"]),O(Ae,{ref_key:"svRef",ref:v,color:k(b),disabled:k(c)},null,8,["color","disabled"])],2),e.showAlpha?(g(),M(we,{key:0,ref_key:"alphaRef",ref:p,color:k(b),disabled:k(c)},null,8,["color","disabled"])):H("v-if",!0),e.predefine?(g(),M($e,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:k(b),colors:e.predefine,disabled:k(c)},null,8,["enable-alpha","color","colors","disabled"])):H("v-if",!0),y("div",{class:w(k(u).e("footer"))},[O(k(T),{ref_key:"inputRef",ref:h,modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,"validate-event":!1,size:"small",disabled:k(c),onChange:_},null,8,["modelValue","onUpdate:modelValue","disabled"]),P(e.$slots,"footer")],2)],2))}}),[["__file","color-picker-panel.vue"]])),De=e({persistent:{type:Boolean,default:!0},modelValue:{type:a(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:U,popperClass:I.popperClass,popperStyle:I.popperStyle,tabindex:{type:[String,Number],default:0},teleported:I.teleported,appendTo:I.appendTo,predefine:{type:a(Array)},validateEvent:{type:Boolean,default:!0},...q,...j(["ariaLabel"])}),Me={[x]:e=>V(e)||C(e),[z]:e=>V(e)||C(e),activeChange:e=>V(e)||C(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},He=f({name:"ElColorPicker"});const Oe=W(h(f({...He,props:De,emits:Me,setup(e,{expose:a,emit:l}){const t=e,{t:s}=b(),u=r("color"),{formItem:v}=G(),p=N(),h=F(),{valueOnClear:f,isEmptyValue:m}=X(t,null),V=Le(t,l),{inputId:C,isLabeledByFormItem:S}=Y(t,{formItemContext:v}),E=n(),B=n(),K=n(),$=n(!1),A=n(!1);let L=!0;const{isFocused:H,handleFocus:P,handleBlur:T}=Q(B,{disabled:h,beforeBlur(e){var a;return null==(a=E.value)?void 0:a.isFocusInsideContent(e)},afterBlur(){var e;me(!1),_e(),t.validateEvent&&(null==(e=null==v?void 0:v.validate)||e.call(v,"blur").catch(e=>he()))}}),W=Z(()=>{var e,a;return null!=(a=null==(e=K.value)?void 0:e.color)?a:V.color}),j=o(()=>J(t,Object.keys(xe))),q=o(()=>t.modelValue||A.value?function(e,a){const{r:l,g:t,b:o,a:r}=e.toRgb();return a?`rgba(${l}, ${t}, ${o}, ${r})`:`rgb(${l}, ${t}, ${o})`}(W,t.showAlpha):"transparent"),I=o(()=>t.modelValue||A.value?W.value:""),U=o(()=>S.value?void 0:t.ariaLabel||s("el.colorpicker.defaultLabel")),fe=o(()=>S.value?null==v?void 0:v.labelId:void 0),be=o(()=>[u.b("picker"),u.is("disabled",h.value),u.bm("picker",p.value),u.is("focused",H.value)]);function me(e){$.value=e}const ge=ee(me,100,{leading:!0});function ye(){h.value||me(!0)}function ke(){ge(!1),_e()}function _e(){R(()=>{t.modelValue?W.fromString(t.modelValue):(W.value="",R(()=>{A.value=!1}))})}function we(){h.value||($.value&&_e(),ge(!$.value))}function Ve(){const e=m(W.value)?f.value:W.value;l(x,e),l(z,e),t.validateEvent&&(null==v||v.validate("change").catch(e=>he())),ge(!1),R(()=>{const e=new Ke({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});W.compare(e)||_e()})}function Ce(){ge(!1),l(x,f.value),l(z,f.value),t.modelValue!==f.value&&t.validateEvent&&(null==v||v.validate("change").catch(e=>he())),_e()}function Se(){var e,a;null==(a=null==(e=null==K?void 0:K.value)?void 0:e.inputRef)||a.focus()}function Be(){$.value&&(ke(),H.value&&Fe())}function $e(e){e.preventDefault(),e.stopPropagation(),me(!1),_e()}function Ae(e){switch(c(e)){case d.enter:case d.numpadEnter:case d.space:e.preventDefault(),e.stopPropagation(),ye();break;case d.esc:$e(e)}}function Fe(){B.value.focus()}return i(()=>I.value,e=>{L&&l("activeChange",e),L=!0}),i(()=>W.value,()=>{t.modelValue||A.value||(A.value=!0)}),i(()=>t.modelValue,e=>{e?e&&e!==W.value&&(L=!1,W.fromString(e)):A.value=!1}),i(()=>$.value,()=>{var e;R(null==(e=K.value)?void 0:e.update)}),D(Ee,V),a({color:W,show:ye,hide:ke,focus:Fe,blur:function(){B.value.blur()}}),(e,a)=>(g(),M(k(pe),{ref_key:"popper",ref:E,visible:$.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[k(u).be("picker","panel"),e.popperClass],"popper-style":e.popperStyle,"stop-popper-mouse-event":!1,pure:"",loop:"",role:"dialog",effect:"light",trigger:"click",teleported:e.teleported,transition:`${k(u).namespace.value}-zoom-in-top`,persistent:e.persistent,"append-to":e.appendTo,onShow:Se,onHide:e=>me(!1)},{content:ae(()=>[te((g(),M(k(Re),le({ref_key:"pickerPanelRef",ref:K},k(j),{border:!1,onKeydown:ie($e,["esc"])}),{footer:ae(()=>[y("div",null,[O(k(ue),{class:w(k(u).be("footer","link-btn")),text:"",size:"small",onClick:Ce},{default:ae(()=>[ce(de(k(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),O(k(ue),{plain:"",size:"small",class:w(k(u).be("footer","btn")),onClick:Ve},{default:ae(()=>[ce(de(k(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])])]),_:1},16,["onKeydown"])),[[k(ve),Be,B.value]])]),default:ae(()=>[y("div",le({id:k(C),ref_key:"triggerRef",ref:B},e.$attrs,{class:k(be),role:"button","aria-label":k(U),"aria-labelledby":k(fe),"aria-description":k(s)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":k(h),tabindex:k(h)?void 0:e.tabindex,onKeydown:Ae,onFocus:k(P),onBlur:k(T)}),[y("div",{class:w(k(u).be("picker","trigger")),onClick:we},[y("span",{class:w([k(u).be("picker","color"),k(u).is("alpha",e.showAlpha)])},[y("span",{class:w(k(u).be("picker","color-inner")),style:_({backgroundColor:k(q)})},[te(O(k(oe),{class:w([k(u).be("picker","icon"),k(u).is("icon-arrow-down")])},{default:ae(()=>[O(k(re))]),_:1},8,["class"]),[[ne,e.modelValue||A.value]]),te(O(k(oe),{class:w([k(u).be("picker","empty"),k(u).is("icon-close")])},{default:ae(()=>[O(k(se))]),_:1},8,["class"]),[[ne,!e.modelValue&&!A.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","popper-style","teleported","transition","persistent","append-to","onHide"]))}}),[["__file","color-picker.vue"]]));export{Oe as E};
