import{f as e,v as a,ah as t,y as s,z as l,Q as n,I as o,x as r,r as c,g as i,dK as p,m as u,n as d,a2 as m,T as x,c as v,o as f,a as h,b,B as y,K as g,t as k,i as w,w as j,C,J as I,H as $,d as B,F as T,D as _,U as D,G as S,s as U,E as z,aT as A,dL as M}from"#entry";import N from"./BqUAZvpV.js";import R from"./CHMmc3Gd.js";import V from"./BGIynS5u.js";import{_ as W,a as H,b as K}from"./C3cAJUEQ.js";import{s as L}from"./COH8ZT7G.js";import"./CXu7cHRZ.js";import"./1bXUUYzG.js";import"./Div4Sb7D.js";import"./EyvYgUJ0.js";import"./B6g85BPi.js";const q={class:"bg-[--secondary-bg] flex-1 w-100% px-200px pt-40px overflow-y-auto bot-manage",style:{height:"calc(100vh - 150px)"}},E={class:"mb-8px flex-between items-center"},F={class:"text-16px font-500"},G={key:0},J={class:"flex-between"},P={class:"text-24px"},Q={key:0,class:"mask text-center color-[--main-text] absolute bg-[--border] top-0 right-0 left-0 bottom-0 flex items-center justify-center z-1 text-14px cursor-pointer"},O={class:"grid grid-cols-3 gap-2 mt-30px"},X={class:"color-[--third-text] rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-15px absolute left-2px top-2px"},Y={class:"text-center mt-30px flex-between"},Z=e({__name:"index",setup(e,{expose:Z}){Z({getMultiWalletsAllChain:Ce});const{t:ee}=a(),{showImport:ae,mode:te,showBotRecord:se}=t(s()),{theme:le,isDark:ne}=t(l()),oe=n(),re=o(!1),ce=o(!1),ie=o(!0),pe=r("encryptedMnemonic","",sessionStorage),ue=o(!1),de=c([]),me=c([]),xe=o(!1),ve=o(!1),fe=c(0),he=c(!1);let be=null;const ye=i(()=>{const e=pe.value||"",a=oe?.userInfo?.tgUid||"";if(e&&a){return p(e,a).split(" ")||[]}return[]}),ge=i(()=>oe?.evmAddress||"");function ke(){he.value||(Ce(),we(10))}u(()=>ge.value,e=>{e?Ce():(de.value=[],me.value=[])}),d(()=>{Ce(),be&&clearInterval(be)});const we=e=>{fe.value=e,he.value=!0,be=L(()=>{fe.value--,fe.value<=0&&(clearInterval(be),be=null,he.value=!1)},1e3)};function je(){xe.value=!0,H().then(e=>{me.value=e,se.value=!0}).catch(e=>{m.error(e)}).finally(()=>{xe.value=!1})}function Ce(){return new Promise((e,a)=>{ue.value=!0;const t=oe.isSupportChains;W(t?.join(",")).then(a=>{de.value=Array.isArray(a)?a?.map((e,a)=>({id:`parent-${a}`,tgUid:e.tgUid,address:e.tgUid,name:e.name,source:e.source,operate:"delete",genSource:e.genSource,evmAddress:e.balancesInfo?.filter(e=>"bsc"==e.chain)?.[0]?.address||"",balance:e?.balancesInfo?.reduce((e,a)=>e+Number(a.balance),0),mainTokenBalance:e?.balancesInfo?.reduce((e,a)=>e+Number(a.mainTokenBalance),0),usdcTokenBalance:e?.balancesInfo?.reduce((e,a)=>e+Number(a.usdcTokenBalance),0),usdtTokenBalance:e?.balancesInfo?.reduce((e,a)=>e+Number(a.usdtTokenBalance),0),balancesInfo:e.balancesInfo?.map((e,t)=>({...e,id:`child-${a}-${t}`,name:e.address,operate:"deposit",isChildren:!0}))})):[],e(de.value)}).catch(e=>{m.error(e),a([])}).finally(()=>{ue.value=!1,ve.value=!1})})}function Ie(){re.value=!0,K().then(e=>{pe.value=e?.Mnemonic,m.success(ee("success")),ie.value=!0,ce.value=!0,$e()}).catch(e=>{m.error(String(e))}).finally(()=>{re.value=!1})}function $e(){Ce()}const Be=()=>{A.confirm(ee("lastChance"),ee("tips"),{type:"warning",icon:M,confirmButtonText:ee("saved"),cancelButtonText:ee("cancel"),customClass:`${te.value} delete_confirm`}).then(()=>{pe.value="",ce.value=!1}).catch(e=>{})};return(e,a)=>{const t=C,s=$,l=z,n=x("copy");return f(),v("div",q,[h("div",E,[h("span",F,k(e.$t("walletList")),1),w(ge)?(f(),v("span",{key:0,class:"text-16px font-500 color-[--third-text] ml-40px cursor-pointer",onClick:je},k(e.$t("operateHistory")),1)):y("",!0),a[5]||(a[5]=h("div",{class:"flex-1"},null,-1)),w(ge)?(f(),g(s,{key:1,class:"text-12px",size:"small",onClick:I(ke,["stop","prevent"]),disabled:w(he)},{default:j(()=>[w(fe)>0?(f(),v("span",G,k(w(fe))+"S",1)):(f(),g(t,{key:1,name:"material-symbols:sync-outline",class:"text-12px"}))]),_:1},8,["disabled"])):y("",!0),w(ge)?(f(),g(s,{key:2,class:"text-12px",size:"small",type:"primary",onClick:I(Ie,["stop","prevent"]),loading:w(re)},{default:j(()=>[b(t,{name:"custom:wallet-fill",class:"text-12px mr-4px"}),B(k(e.$t("createWallet")),1)]),_:1},8,["loading"])):y("",!0),w(ge)?(f(),g(s,{key:3,class:"text-12px",size:"small",onClick:a[0]||(a[0]=I(e=>ae.value=!0,["stop","prevent"]))},{default:j(()=>[b(t,{name:"mingcute:new-folder-fill",class:"text-102x mr-4px"}),B(k(e.$t("importWallet")),1)]),_:1})):y("",!0)]),b(N,{tableData:w(de),loading:w(ue),onRefresh:$e},null,8,["tableData","loading"]),b(R,{onRefresh:$e}),b(V,{tableData:w(me),loading:w(xe)},null,8,["tableData","loading"]),b(l,{modelValue:w(ce),"onUpdate:modelValue":a[4]||(a[4]=e=>U(ce)?ce.value=e:null),width:"500",height:"630",class:S(["dialog-connect1",w(le)]),"append-to-body":"","close-on-click-modal":!1,"show-close":!1},{header:j(()=>[h("div",J,[h("span",P,k(e.$t("mnemonic")),1),b(t,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:a[1]||(a[1]=I(e=>ce.value=!1,["stop","prevent"]))})])]),default:j(()=>[h("div",{class:"relative min-h-160px",onClick:a[2]||(a[2]=e=>ie.value=!1)},[w(ie)?(f(),v("div",Q,[b(t,{name:"custom:show-code",class:"text-16px mr-4px color-[--main-text]"}),B(" "+k(e.$t("clickMnemonic")),1)])):y("",!0),h("div",O,[(f(!0),v(T,null,_(w(ye),(e,a)=>(f(),v("div",{class:"mnemonic-item block border border-solid border-[--dialog-divider] py-8px text-center relative",key:a},[h("span",X,k(a+1),1),B(" "+k(e),1)]))),128))])]),h("div",Y,[D((f(),g(s,{class:"flex-1",style:{height:"48px"},onClick:a[3]||(a[3]=I(()=>{},["stop","prevent"]))},{default:j(()=>[B(k(e.$t("copyMnemonic")),1)]),_:1})),[[n,w(ye)?.join(" ")]]),b(s,{class:"flex-1",style:{height:"48px"},type:"primary",onClick:I(Be,["stop","prevent"])},{default:j(()=>[B(k(e.$t("continue")),1)]),_:1})])]),_:1},8,["modelValue","class"])])}}});export{Z as default};
