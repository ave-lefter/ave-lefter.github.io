const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DYF2fgBp.js","./DTAMird2.js","./entry.CAfyYPtM.css","./DMZvEsQv.js","./1bXUUYzG.js","./scrollbar.wwf0UyhQ.css","./Div4Sb7D.js","./tag.C2CcED8f.css","./select.B8LxdPp2.css","./NZiWsxCB.js","./vLoading.BpJEUJY2.css","./DWsaYBFQ.js","./EyvYgUJ0.js","./visibleChange.B6TrAqUJ.css","./BUyr3k23.js","./vIWCTboT.js","./BbcemesW.js","./DZrW0QoB.js","./CZIhrSUn.js","./DhoqPgLY.js","./input-number.HwP0nlBD.css","./DYraDxUd.js","./switch.DT829VzR.css","./slippageSet.0e0iQmHp.css","./slippageSetMarket.CL8hNZtA.css","./C7V9UFRI.js","./slider.LN1DrOuY.css","./tabs.Bq1v7sO2.css","./4ZxzSbBH.js","./limit.CS6pgMdN.css"])))=>i.map(i=>d[i]);
import{f as e,R as a,v as t,g as l,c as n,o,F as s,D as u,G as i,i as r,bN as c,a as m,t as d,_ as p,K as v,w as f,M as k,B as b,U as h,b as T,a5 as y,C as g,am as w,J as x,cv as _,$ as S,aN as I,r as A,m as N,nO as $,E as F,s as C,N as P,b_ as R,bd as M,by as V,nP as E,aE as U,e9 as D,H as B,d as O,aT as H,bh as j,aH as L,X as z,a4 as W,nQ as q,a0 as X,fr as K,T as Q,b3 as Z,bp as G,nR as Y,cX as J,nS as ee,bQ as ae,I as te,ay as le,cg as ne,ft as oe,nT as se,nU as ue,e6 as ie,nV as re,dj as ce,dk as me,fp as de,nW as pe,bO as ve,P as fe,fj as ke,aI as be,aJ as he,nX as Te,Q as ye,cw as ge,nY as we,nZ as xe,fk as _e,cz as Se,fm as Ie,n_ as Ae,n$ as Ne,o0 as $e,o1 as Fe,fn as Ce,o2 as Pe,fq as Re,o3 as Me,fl as Ve,o4 as Ee,o5 as Ue,o6 as De,fo as Be,o7 as Oe,o8 as He,fi as je,o9 as Le,fs as ze,bS as We,oa as qe,ob as Xe,as as Ke,an as Qe,ax as Ze,n as Ge}from"#entry";import{a as Ye,E as Je}from"./vIWCTboT.js";import{E as ea}from"./1bXUUYzG.js";import{E as aa,a as ta}from"./DZrW0QoB.js";import{E as la}from"./CZIhrSUn.js";import{E as na}from"./DWsaYBFQ.js";import{_ as oa}from"./4ZxzSbBH.js";import{a as sa,b as ua}from"./BUyr3k23.js";const ia={class:"tabs"},ra=["disabled","onClick"],ca=p(e({__name:"tabs",props:{activeTab:{type:Number,default:0}},emits:["update:activeTab"],setup(e,{emit:p}){const v=a(),{t:f}=t(),k=p,b=["sui","solana","tron"],h=l(()=>[{name:f("buy"),value:0},{name:f("sell"),value:1}]);return(a,t)=>(o(),n("div",ia,[(o(!0),n(s,null,u(r(h),(t,l)=>(o(),n("button",{key:l,class:i(["tab-item",{active:t.value===e.activeTab,[`tab-${t.value}`]:!0}]),type:"button",disabled:"evm"!==("getChainInfo"in a?a.getChainInfo:r(c))(r(v)?.chain||"")?.vm_type&&!b.includes(r(v)?.chain||""),onClick:e=>{return a=t.value,void k("update:activeTab",a);var a}},[m("span",null,d(t.name),1)],10,ra))),128))]))}}),[["__scopeId","data-v-74ae2df7"]]),ma=p(e({__name:"typeTabs",props:{isOnlyMarket:{type:Boolean,default:!1},tab:{type:Number,default:0}},emits:["update:tab"],setup(e,{emit:i}){const c=e,m=i,d=a(),{t:p}=t(),k=l(()=>{if(c.isOnlyMarket)return[{name:p("swapT"),value:2}];return"solana"===(d.chain||"")?[{name:p("swapT"),value:2},{name:p("limitT"),value:0}]:[{name:p("swapT"),value:2},{name:p("limitT"),value:0},{name:p("stopLimit"),value:1}]});return(a,t)=>{const l=Ye,i=Je;return o(),v(i,{"model-value":e.tab,class:"select-tabs","onUpdate:modelValue":t[0]||(t[0]=e=>m("update:tab",e))},{default:f(()=>[(o(!0),n(s,null,u(r(k),(e,a)=>(o(),v(l,{key:a,label:e.name,name:e.value},null,8,["label","name"]))),128))]),_:1},8,["model-value"])}}}),[["__scopeId","data-v-816d704f"]]),da="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='11px'%20height='3px'%20viewBox='0%200%2011%203'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e编组%3c/title%3e%3cg%20id='交易+挂单'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='交易-市价交易-买备份'%20transform='translate(-268.000000,%20-584.000000)'%20fill='%23999999'%20fill-rule='nonzero'%3e%3cg%20id='提示文案'%20transform='translate(14.000000,%20508.000000)'%3e%3cg%20id='编组-9备份-3'%20transform='translate(0.000000,%2063.000000)'%3e%3cg%20id='编组'%20transform='translate(254.000000,%2013.000000)'%3e%3cpolygon%20id='路径'%20points='9.53333333%200%2011%200%209.77777778%201.13999999%207.88333333%203%207.15%202.28%208.31111112%201.13999999%200%201.13999999%200%200'%3e%3c/polygon%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",pa={class:"history"},va={key:0,class:"flex gap-5px mb-32px"},fa=["onClick"],ka={class:"flex-column mt-6px"},ba={class:"flex-start"},ha={class:"token-symbol font-14"},Ta={key:0,class:"risk-status high"},ya={class:"flex-start color-[--secondary-text] text-16px font-500 mb-10px"},ga={class:"ml-5px"},wa={class:"content color-[--main-text]"},xa=["onClick"],_a={class:"token-info"},Sa={class:"flex-column"},Ia={class:"flex-start"},Aa={class:"token-symbol font-14"},Na={key:0,class:"risk-status high"},$a={key:0,class:"px-5px py-0 color-[--third-text]"},Fa={key:0,class:"flex flex-col text-right"},Ca=["innerHTML"],Pa=["innerHTML"],Ra={key:2,class:"empty"},Ma=p(e({__name:"searchTable",props:{searchTokens:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},disabledToken:{type:String,default:""}},emits:["onSelect"],setup(e,{emit:a}){const t=e,c=a;k().chainConfig;const p={bsc:{BNB:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WBNB:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",USDT:"0x55d398326f99059ff775485246999027b3197955",USDC:"0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d",USD1:"0x8d0d000ee44948fc98c9b98a4fa4921476f08b0d"},eth:{base:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WETH:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",USDT:"0xdac17f958d2ee523a2206206994597c13d831ec7",USDC:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",USD1:"0x8d0d000ee44948fc98c9b98a4fa4921476f08b0d"},base:{ETH:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WETH:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",USDT:"0xfde4c96c8593536e31f229ea8f37b2ada2699bb2",USDC:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913"},xlayer:{OKB:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",WOKB:"0xe538905cf8410324e03a5a23c1c177a474d59b2b",USDT:"0x5b827940327c99e255ff498206703bffaa625a43",USDC:"0x74b7f16337b8972027f6196a17a631ac6de26d22"},solana:{SOL:"So11111111111111111111111111111111111111112",USDT:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"}},A=l(()=>{const e=[...new Set(Object.values(p).flatMap(e=>Object.values(e)))],a=t.searchTokens?.filter(a=>e?.includes(a.address||""));return a});function N(e){(e?.address||e?.token)&&t.disabledToken!==e.address&&c("onSelect",e)}return(a,t)=>{const l=y,c=g,p=ea,k=w;return o(),n("div",pa,[r(A)?.length>0?(o(),n("div",va,[(o(!0),n(s,null,u(r(A),(e,t)=>(o(),n("div",{class:"item bg-[--border] rounded-12px px-12px py-12px flex flex-col items-center justify-center flex-1 max-w-20%",key:t,onClick:a=>N(e)},[T(l,{row:e,tokenClass:"w-32px h-32px"},null,8,["row"]),m("div",ka,[m("div",ba,[m("span",ha,d(e.symbol),1),((e?.risk_score||0)>55||(e?.risk_level||0)<0)&&1!==e.risk_level?(o(),n("span",Ta,d(a.$t("highRisk")),1)):b("",!0)])])],8,fa))),128))])):b("",!0),m("div",ya,[T(c,{class:"text-24px",name:"custom:my-token"}),m("span",ga,d(a.$t("myToken")),1)]),e.searchTokens?.length>0?h((o(),v(p,{key:1,height:"calc(45vh)",class:"hidden-scrollbar"},{default:f(()=>[m("ul",wa,[(o(!0),n(s,null,u(e.searchTokens,(t,s)=>(o(),n("li",{key:s,class:i([{disabled:e.disabledToken===t.address},"flex justify-between px-16px py-16px clickable hover:bg-[--dialog-list-hover]"]),onClick:x(e=>N(t),["stop","prevent"])},[m("div",_a,[T(l,{class:"mr-5px",row:t,tokenClass:"w-40px h-40px"},null,8,["row"]),m("div",Sa,[m("div",Ia,[m("span",Aa,d(t.symbol),1),((t?.risk_score||0)>55||(t?.risk_level||0)<0)&&1!==t.risk_level?(o(),n("span",Na,d(a.$t("highRisk")),1)):b("",!0)]),t?.tags||t.address===r(_)?b("",!0):(o(),n("span",$a,d(t.token?.slice(0,4))+"**"+d(t.token?.slice(-4)),1))])]),(t.amount||0)>0||(t.value||0)>0?(o(),n("div",Fa,[m("span",{class:"color-[--main-text]",innerHTML:`$ ${r(S)((t.current_price_usd||t.price||0)*(t?.amount||t?.value||0))}`},null,8,Ca),m("span",{class:"color-[--third-text] py-2px",innerHTML:t.amount||t.value?r(S)(t?.amount||t?.value||""):""},null,8,Pa)])):b("",!0)],10,xa))),128))])]),_:1})),[[k,e.loading]]):(o(),n("div",Ra,[m("div",null,[t[0]||(t[0]=m("img",{src:I},null,-1)),t[1]||(t[1]=m("br",null,null,-1)),m("span",null,d(a.$t("noSearchResults")),1)])]))])}}}),[["__scopeId","data-v-9b58adf4"]]),Va={class:"text-14px color-[--main-text] font-400 ml-3px"},Ea={key:1},Ua={class:"text-20px font-500"},Da={class:"search-content mt-16px"},Ba=p(e({__name:"selectSwapToken",props:{tokens:{type:Array,default:()=>[]},token:{type:Object,default:()=>({token:"",address:"",symbol:"",logo_url:"",chain:""})},chain:{type:String,default:""},disabledToken:{type:String,default:""}},emits:["update:token"],setup(e,{emit:a}){const{t:u}=t(),c=e,p=a,k=A(!1),b=A(""),h=A(c.tokens||[]),w=A(!1),_=l(()=>h.value?.length>0?h.value:c.tokens||[]);N(b,e=>{""!==e?I():h.value=c.tokens}),N(k,e=>{e&&(h.value=c.tokens||[],b.value="")});let S=null;function I(){S&&(clearTimeout(S),S=null),S=setTimeout(()=>{!function(){if(""!==b.value){const e=new RegExp(b.value,"i"),a=c.tokens?.filter(a=>e.test(a?.address||"")||e.test(a?.symbol||"")||e.test(a?.name||""))||[];w.value=!0,$(b.value,c.chain).then(e=>{const t=e.filter?.(e=>e.chain===c.chain&&!a.some(a=>a.token===e.token))?.map?.(e=>({...e,address:e.token}));h.value=[...a,...t]}).catch(e=>{h.value=[]}).finally(()=>{w.value=!1})}else h.value=c.tokens}()},500)}function M(e){e.address!==c.disabledToken&&(e?.address||e?.token)&&(p("update:token",{...e,value:e?.value?.toString()||0,balance:e?.balance?.toString()||0}),k.value=!1)}return(e,a)=>{const t=y,l=g,p=P,h=F;return o(),n(s,null,[m("button",{class:"flex items-center bg-transparent border-none p-0 clickable text-14px",type:"button",onClick:a[0]||(a[0]=x(e=>k.value=!0,["stop"]))},[c.token?.address||c.token?.token?(o(),n(s,{key:0},[(o(),v(t,{key:c.token?.address,row:c.token},null,8,["row"])),m("span",Va,d(c.token?.symbol||""),1)],64)):(o(),n("div",Ea,d(e.$t("pleaseSelectToken")),1)),T(l,{class:i(["arrow-up",{active:!0===r(k)}]),name:"solar:alt-arrow-down-bold"},null,8,["class"])]),T(h,{modelValue:r(k),"onUpdate:modelValue":a[3]||(a[3]=e=>C(k)?k.value=e:null),"append-to-body":"",class:"new-dialog",width:"420px"},{header:f(()=>[m("span",Ua,d(r(u)("selectToken")),1)]),default:f(()=>[m("div",{class:"search-dialog-container",onClick:a[2]||(a[2]=x(()=>{},["stop"]))},[T(p,{ref:"inputSearch",class:"search-input",modelValue:r(b),"onUpdate:modelValue":a[1]||(a[1]=e=>C(b)?b.value=e:null),modelModifiers:{trim:!0},placeholder:r(u)("enterAddress/token"),clearable:"",onKeydown:R(I,["enter"])},{prefix:f(()=>[T(l,{class:"text-16px text-[--third-text]",name:"custom:search"})]),_:1},8,["modelValue","placeholder"]),m("div",Da,[T(Ma,{searchTokens:r(_),loading:r(w),disabledToken:c.disabledToken||c.token.address,onOnSelect:M},null,8,["searchTokens","loading","disabledToken"])])])]),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-c6e5211f"]]),Oa={class:"flex items-center"},Ha={key:0,class:"mr-5px color-[--main-text]"},ja={key:1,class:"mr-5px"},La={class:"text-18px color-#fff font-400"},za={class:"slippage-label"},Wa={class:"mt-10px"},qa=["id","value","disabled"],Xa=["for"],Ka={class:"slippage-input"},Qa={key:0,class:"tip"},Za={class:"form-submit"},Ga=p(e({__name:"slippageSet",props:{slippage:{type:[String,Number],default:"2"},autoSlippage:{type:String,default:"2"},canSetAuto:{type:Boolean,default:!0}},emits:["update:slippage"],setup(e,{emit:a}){const l=e,i=a,{t:c}=t(),p=[.1,.5,1],k=A("auto"===l.slippage?void 0:Number(l.slippage)),y=A(!1),w=A("auto"===l.slippage);function _(){void 0===k.value?i("update:slippage","auto"):i("update:slippage",String(k.value)),y.value=!1}function S(){H.alert(c("slippageTips"),{title:c("slippage"),confirmButtonText:c("iKnown")})}function I(){k.value&&Number(k.value)>49.99&&(k.value=49.99)}function $(e){return Number(e)<=49.99}return N(y,e=>{e&&(k.value="auto"===l.slippage?void 0:Number(l.slippage))}),N(w,e=>{e&&(k.value=void 0)}),(a,t)=>{const l=g,i=V,c=U,A=ta,N=la,P=aa,R=B,H=M,j=F;return o(),n("div",null,[m("div",Oa,[e.canSetAuto?(o(),n("span",Ha,d("auto"===e.slippage?a.$t("autoSlippage"):a.$t("manualSlippage"))+"("+d("auto"===e.slippage?e.autoSlippage:e.slippage)+"%) ",1)):(o(),n("span",ja,d(e.slippage)+"%",1)),T(l,{class:"clickable",name:"tdesign:setting-1",onClick:t[0]||(t[0]=x(e=>y.value=!0,["stop"]))})]),T(j,{modelValue:r(y),"onUpdate:modelValue":t[4]||(t[4]=e=>C(y)?y.value=e:null),width:"500px","append-to-body":""},{header:f(()=>[m("span",La,d(a.$t("setSlippage")),1)]),default:f(()=>[T(H,{class:"popup-content",onSubmit:x(_,["prevent"])},{default:f(()=>[m("div",za,[m("span",null,d(a.$t("slippage")),1),T(i,{size:15,color:"#80838B",style:{cursor:"pointer","margin-left":"5px","margin-right":"auto"},onClick:x(S,["stop"])},{default:f(()=>[T(r(E))]),_:1}),e.canSetAuto?(o(),v(c,{key:0,modelValue:r(w),"onUpdate:modelValue":t[1]||(t[1]=e=>C(w)?w.value=e:null),label:a.$t("autoSlippage"),size:"large"},null,8,["modelValue","label"])):b("",!0)]),m("div",Wa,[T(P,{gutter:10},{default:f(()=>[(o(),n(s,null,u(p,(e,a)=>T(A,{key:a,span:6,class:"radio-group"},{default:f(()=>[h(m("input",{id:`radio-${e}`,"onUpdate:modelValue":t[2]||(t[2]=e=>C(k)?k.value=e:null),type:"radio",value:e,disabled:r(w),class:"radio-input"},null,8,qa),[[D,r(k)]]),m("label",{for:`radio-${e}`,class:"radio-item"},d(e)+"%",9,Xa)]),_:2},1024)),64)),T(A,{span:6},{default:f(()=>[m("div",Ka,[T(N,{modelValue:r(k),"onUpdate:modelValue":t[3]||(t[3]=e=>C(k)?k.value=e:null),class:"select bg-#212847 w-full",name:"slippage",type:"number",min:0,max:49.99,step:.01,disabled:r(w),"controls-position":"right",clearable:"",rules:[{required:!0,message:a.$t("enterSlippage")},{validator:$,message:a.$t("slippageMaxTip")}],onBlur:I},null,8,["modelValue","disabled","rules"]),t[5]||(t[5]=m("span",{class:"color-fff"},"%",-1))])]),_:1})]),_:1}),void 0!==r(k)&&Number(r(k))<=.1?(o(),n("span",Qa,d(a.$t("slippageTip1")),1)):b("",!0)]),m("div",Za,[T(R,{class:"swap-button w-full rd-8px!",size:"large",block:"","native-type":"submit",type:"primary",disabled:0==e.slippage},{default:f(()=>[O(d(a.$t("confirm1")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1eb2e286"]]),Ya={class:"token-item header"},Ja={class:"flex-3"},et={class:"flex-1-5"},at={class:"flex-1 right-label"},tt=["onClick"],lt={class:"token-item"},nt={class:"path-list flex-start flex-3"},ot={key:0},st={key:1,class:"path-amm"},ut={key:0,class:"tag"},it=["innerHTML"],rt=p(e({__name:"selectRouter",props:{visible:{type:Boolean,default:!1},listRouter:{type:Array,default:()=>[]},isAmount:{type:Boolean,default:!1},selectedRouterIndex:{type:Number,default:0}},emits:["getSelectedRouter","update:visible"],setup(e,{emit:a}){const t=e,i=a,c=l({get:()=>t.visible,set(e){i("update:visible",e)}});function p(e){return e>40?"#ff646d":e>10?"#F7933F":e>5?"#f8be46":""}return(a,t)=>{const l=na,k=L,y=V,g=F;return o(),v(g,{modelValue:r(c),"onUpdate:modelValue":t[0]||(t[0]=e=>C(c)?c.value=e:null),class:"dialog-zixuan dialog",width:"600px"},{header:f(()=>[m("span",null,d(a.$t("selectRouter")),1)]),default:f(()=>[m("ul",null,[m("li",Ya,[m("span",Ja,d(a.$t("router")),1),m("span",et,d(e.isAmount?a.$t("expectedAmount"):a.$t("expectedPay")),1),m("span",at,d(a.$t("priceImpact")),1),t[1]||(t[1]=m("span",{class:"w-16px"},null,-1))]),h(T(l,{image:r(I)},null,8,["image"]),[[j,e.listRouter&&0===e.listRouter.length]]),(o(!0),n(s,null,u(e.listRouter,(l,c)=>(o(),n("a",{key:c,href:"",onClick:x(e=>(e=>{i("getSelectedRouter",e)})(c),["stop","prevent"])},[m("li",lt,[m("div",nt,[(o(!0),n(s,null,u(l?.path||[],(e,l)=>(o(),n(s,{key:l},[e.symbol?(o(),n("span",ot,d(e.symbol),1)):b("",!0),e.nextAmm&&"unknown"!==e.nextAmm?(o(),n("div",st,[T(k,{src:("formatIconSwap"in a?a.formatIconSwap:r(z))(e.nextAmm),class:"w-14px h-14px rd-10px mb-3px",style:{width:"14px",height:"14px","border-radius":"10px","margin-bottom":"3px"}},{error:f(()=>[...t[2]||(t[2]=[m("img",{class:"w-14px rd-10px",src:oa},null,-1)])]),placeholder:f(()=>[...t[3]||(t[3]=[m("img",{class:"w-14px rd-10px",src:oa},null,-1)])]),_:1},8,["src"]),t[4]||(t[4]=m("img",{class:"w-15px mr-5px",src:da,alt:"",srcset:""},null,-1))])):b("",!0)],64))),128)),0===c?(o(),n("div",ut,d(a.$t("best")),1)):b("",!0)]),m("span",{class:"flex-1-5",innerHTML:("formatNumber"in a?a.formatNumber:r(S))(l?.amount||0)},null,8,it),Number(l?.priceImpact||0)<10?(o(),n("span",{key:0,class:"right-label flex-1",style:W({color:p(Number(l.priceImpact||0))})},[Number(l.priceImpact)<.01?(o(),n(s,{key:0},[O("<0.01%")],64)):(o(),n(s,{key:1},[O(d(("formatNumber"in a?a.formatNumber:r(S))(Number(l?.priceImpact||0)))+"%",1)],64))],4)):(o(),n("span",{key:1,class:"right-label flex-1",style:W({color:p(Number(l?.priceImpact||0))})},[Number(l.priceImpact)>40?(o(),n(s,{key:0},[O(">40%")],64)):(o(),n(s,{key:1},[O(d(("formatNumber"in a?a.formatNumber:r(S))(Number(l?.priceImpact||0),2))+"%",1)],64))],4)),e.selectedRouterIndex===c?(o(),v(y,{key:2,size:16,color:"#12B886"},{default:f(()=>[T(r(q))]),_:1})):(o(),v(y,{key:3,style:{opacity:"0"},size:16,color:"#12B886"},{default:f(()=>[T(r(q))]),_:1}))])],8,tt))),128))])]),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-4d353c82"]]),ct={key:0},mt={key:1},dt={key:2},pt={class:"swap-info"},vt={class:"swap-info_item header"},ft={class:"header-li"},kt={class:"header-li_left"},bt={class:"color-#80838B mr-15px"},ht=["src"],Tt={style:{"font-size":"14px"}},yt=["innerHTML"],gt={class:"header-li mt-34px"},wt={class:"header-li_left"},xt={class:"color-80838B mr-15px"},_t=["src"],St={style:{"font-size":"14px"}},It=["innerHTML"],At={class:"swap-info_item"},Nt={class:"swap-info_item-label"},$t={class:"swap-info_item-value"},Ft=["innerHTML"],Ct=["innerHTML"],Pt={key:0,class:"swap-info_item"},Rt={class:"swap-info_item-label"},Mt={class:"swap-info_item-value"},Vt={key:1,class:"swap-info_item"},Et={class:"swap-info_item-label"},Ut={class:"swap-info_item-value"},Dt={key:0,class:"swap-info_item"},Bt={class:"swap-info_item-label"},Ot={class:"swap-info_item-value"},Ht={key:1,class:"swap-info_item"},jt={class:"swap-info_item-label"},Lt={class:"swap-info_item-value"},zt={class:"swap-info_item"},Wt={class:"swap-info_item-label"},qt={key:0,class:"swap-info_item-value path-list"},Xt={key:0},Kt={class:"path-amm"},Qt={key:1,style:{width:"15px",margin:"0 5px 0"},src:da,alt:"",srcset:""},Zt={key:1},Gt={key:0,style:{width:"15px",margin:"0 5px 0"},src:da,alt:"",srcset:""},Yt={key:1},Jt={key:3,class:"swap-info_item"},el={class:"swap-info_item-label"},al={class:"swap-info_item-value"},tl=["href"],ll={class:"footer"},nl={key:1,class:"swap-info center"},ol={class:"mt-20px"},sl={class:"swap-info center"},ul={class:"mt-20px"},il={class:"footer"},rl=p(e({__name:"confirmSwap",props:{visible:{type:Boolean,default:!1},swapInfo:{type:Object,default:()=>({})},slippage:{type:String,default:"2"},loading:{type:Boolean,default:!1},chain:{type:String,default:""},nativePrice:{type:[Number,String],default:0},gasPrice:{type:String,default:"0"},activeShow:{type:Number,default:0},swapQuoteInfo:{type:Object,default:()=>({})}},emits:["update:visible","submit"],setup(e,{emit:a}){const t=e,i=a,c=A(!1),p=l({get:()=>t.visible,set(e){i("update:visible",e)}}),k=l(()=>{const e=t.swapInfo?.toToken?.decimals||0,a=t.swapInfo?.toAmount;return S(a?new X(a||0).times(100-Number(t.slippage)).div(100).toFixed():K(new X(t.swapInfo?.toTokenAmount||0).times(100-Number(t.slippage)).div(100).toFixed(0),e))}),y=l(()=>{const e=t.swapInfo?.fromToken?.decimals||0,a=t.swapInfo?.fromAmount;return S(a?new X(a||0).times(100+Number(t.slippage)).div(100).toFixed():K(new X(t.swapInfo?.fromTokenAmount||0).times(100+Number(t.slippage)).div(100).toFixed(0),e))}),w=l(()=>t.swapInfo?.swapRouterPath||[]);function _(e,a){return!e||!a||isNaN(Number(e))||isNaN(Number(a))?"0":S(new X(a).div(e).toFixed())||"0"}function I(){i("submit")}function $(){p.value=!1;const e=G(t.chain,t.swapInfo.transaction,"tx");window.open(e)}return N(()=>t.visible,e=>{e&&(c.value=!1)}),(a,l)=>{const i=L,A=g,N=B,P=V,R=F,M=Q("copy");return o(),v(R,{modelValue:r(p),"onUpdate:modelValue":l[0]||(l[0]=e=>C(p)?p.value=e:null),width:"446px"},{header:f(()=>[1===e.activeShow?(o(),n("span",ct,d(a.$t("swap")),1)):2===e.activeShow?(o(),n("span",mt,d(a.$t("waitForConfirming")),1)):3===e.activeShow?(o(),n("span",dt,d(a.$t("tradeSubmitted")),1)):b("",!0)]),default:f(()=>{return[1==e.activeShow?(o(),n(s,{key:0},[m("ul",pt,[m("li",vt,[m("div",ft,[m("div",kt,[m("span",bt,d(a.$t("sell")),1),m("img",{class:"icon-token",src:("getSymbolDefaultIcon"in a?a.getSymbolDefaultIcon:r(Z))({symbol:e.swapInfo.fromToken.symbol||"",logo_url:e.swapInfo.fromToken.logo_url||"",chain:e.swapInfo.fromToken.chain||t.chain||""}),alt:"",onerror:"this.src='/icon-default.png'",height:"20"},null,8,ht),m("span",Tt,d(e.swapInfo.fromToken.symbol),1)]),m("div",{class:"header-li_right",innerHTML:r(S)(e.swapInfo?.fromAmount||("formatUnits"in a?a.formatUnits:r(K))(e.swapInfo.fromTokenAmount||0,e.swapInfo.fromToken.decimals))||"0"},null,8,yt)]),m("div",gt,[m("div",wt,[m("span",xt,d(a.$t("buy")),1),m("img",{class:"icon-token",src:("getSymbolDefaultIcon"in a?a.getSymbolDefaultIcon:r(Z))({symbol:e.swapInfo.toToken.symbol||"",logo_url:e.swapInfo.toToken.logo_url||"",chain:e.swapInfo.toToken.chain||t.chain||""}),alt:"",onerror:"this.src='/icon-default.png'",height:"20"},null,8,_t),m("span",St,d(e.swapInfo.toToken.symbol),1)]),m("div",{class:"header-li_right",innerHTML:r(S)(e.swapInfo?.toAmount||("formatUnits"in a?a.formatUnits:r(K))(e.swapInfo.toTokenAmount||0,e.swapInfo.toToken.decimals))||"0"},null,8,It)])]),m("li",At,[m("div",Nt,d(a.$t("price")),1),m("div",$t,[m("div",{class:"p-item",innerHTML:`1 ${e.swapInfo.fromToken.symbol} = ${_(e.swapInfo?.fromAmount||("formatUnits"in a?a.formatUnits:r(K))(e.swapInfo.fromTokenAmount||0,e.swapInfo.fromToken.decimals),e.swapInfo?.toAmount||("formatUnits"in a?a.formatUnits:r(K))(e.swapInfo.toTokenAmount||0,e.swapInfo.toToken.decimals))} ${e.swapInfo.toToken.symbol}`},null,8,Ft),m("div",{class:"p-item",innerHTML:`1 ${e.swapInfo.toToken.symbol} = ${_(e.swapInfo?.toAmount||("formatUnits"in a?a.formatUnits:r(K))(e.swapInfo.toTokenAmount||0,e.swapInfo.toToken.decimals),e.swapInfo?.fromAmount||("formatUnits"in a?a.formatUnits:r(K))(e.swapInfo.fromTokenAmount||0,e.swapInfo.fromToken.decimals))} ${e.swapInfo.fromToken.symbol}`},null,8,Ct)])]),e.swapInfo.fromToken.isWrapper&&e.swapInfo.toToken.isETH||e.swapInfo.toToken.isWrapper&&e.swapInfo.fromToken.isETH?b("",!0):(o(),n("li",Pt,[m("div",Rt,d(a.$t("slippage")),1),m("div",Mt,d(e.slippage)+"%",1)])),e.swapInfo.gasValue&&"tron"!==e.chain&&"solana"!==e.chain?(o(),n("li",Vt,[m("div",Et,d(a.$t("estimatedGas")),1),m("div",Ut,"≈ $"+d((p=e.swapInfo.gasValue,p&&Number(new X(p.toString()).times(t.nativePrice).times(t.gasPrice).div(String(10**18)).toFixed(2))||"0")),1)])):b("",!0),e.swapInfo.fromToken.isWrapper&&e.swapInfo.toToken.isETH||e.swapInfo.toToken.isWrapper&&e.swapInfo.fromToken.isETH?b("",!0):(o(),n(s,{key:2},[e.swapInfo.isAmountOut?(o(),n("li",Ht,[m("div",jt,d(a.$t("maximumReceived")),1),m("div",Lt,d(r(y))+" "+d(e.swapInfo?.fromToken?.symbol),1)])):(o(),n("li",Dt,[m("div",Bt,d(a.$t("minimumReceived")),1),m("div",Ot,d(r(k))+" "+d(e.swapInfo?.toToken?.symbol),1)]))],64)),m("li",zt,[m("div",Wt,d(a.$t("tokenRoute")),1),e.swapInfo.fromToken.isWrapper&&e.swapInfo.toToken.isETH||e.swapInfo.toToken.isWrapper&&e.swapInfo.fromToken.isETH?(o(),n("div",Zt,[(o(!0),n(s,null,u(r(w),(e,a)=>(o(),n(s,{key:a},[0!==a?(o(),n("img",Gt)):b("",!0),e.symbol?(o(),n("span",Yt,d(e.symbol),1)):b("",!0)],64))),128))])):(o(),n("div",qt,[(o(!0),n(s,null,u(r(w),(e,t)=>(o(),n(s,{key:t},[e.symbol?(o(),n("span",Xt,d(e.symbol),1)):b("",!0),m("div",Kt,[e.nextAmm&&"unknown"!==e.nextAmm?(o(),v(i,{key:0,src:("formatIconSwap"in a?a.formatIconSwap:r(z))(e.nextAmm),style:{width:"14px",height:"14px","border-radius":"10px","margin-bottom":"3px"}},{error:f(()=>[...l[1]||(l[1]=[m("img",{style:{width:"14px","border-radius":"10px"},src:oa},null,-1)])]),placeholder:f(()=>[...l[2]||(l[2]=[m("img",{style:{width:"14px","border-radius":"10px"},src:oa},null,-1)])]),_:1},8,["src"])):b("",!0),t!==r(w).length-1?(o(),n("img",Qt)):b("",!0)])],64))),128))]))]),e.swapInfo?.transaction?(o(),n("li",Jt,[m("div",el,d(a.$t("txHash")),1),m("div",al,[m("a",{href:("formatExplorerUrl"in a?a.formatExplorerUrl:r(G))(e.chain,e.swapInfo.transaction,"tx"),target:"_blank"},d(e.swapInfo?.transaction?.slice(0,6)+"..."+e.swapInfo?.transaction?.slice(-6)),9,tl),h(T(A,{name:"bxs:copy",class:"clickable ml-5px"},null,512),[[M,e.swapInfo?.transaction]])])])):b("",!0)]),m("div",ll,[T(N,{class:"swap-button w-full",type:"primary",size:"large",loading:e.loading,"loading-text":a.$t("confirming"),block:"",disabled:r(c),onClick:x(I,["stop"])},{default:f(()=>[O(d(a.$t("confirm")),1)]),_:1},8,["loading","loading-text","disabled"])])],64)):2===e.activeShow?(o(),n("div",nl,[T(P,{size:110,color:"#747782",style:{animation:"rotating 2s linear infinite normal"}},{default:f(()=>[T(r(Y))]),_:1}),m("span",ol,d(a.$t("plsConfirmWallet")),1)])):3===e.activeShow?(o(),n(s,{key:2},[m("div",sl,[T(A,{name:"lineicons:arrow-up-circle",class:"text-110px"}),m("span",ul,d(a.$t("plsViewBlockChainExplorer")),1)]),m("div",il,[T(N,{class:"swap-button w-full",type:"primary",size:"large",block:"",onClick:x($,["stop"])},{default:f(()=>[O(d(a.$t("viewTransition")),1)]),_:1})])],64)):b("",!0)];var p}),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-ea1165d0"]]),cl=J("swap",()=>{const e=ee("swap_token1",{address:"",symbol:"",logo_url:"",chain:"",balance:0,decimals:0}),t=ee("swap_token2",{address:"",symbol:"",logo_url:"",chain:"",balance:0,decimals:0}),n=a(),o=ae(),s=te(0),u=A(2),i=l(()=>0===s.value?t.value:e.value),r=l(()=>0===s.value?e.value:t.value),m=A(o.tokenInfo),d=A(o.tokenInfoExtra),p=le(),v=l(()=>n.chain||ne(p.params.id).chain||""),f=A([]),k=l(()=>{const e=[...f.value?.slice?.()||[]];return e?.[0]?.chain&&e?.[0]?.chain!==h.value?.[0]?.chain?e:(h.value.slice().forEach(a=>{const t=e.find(e=>e.token+"-"+e.chain==a.token+"-"+a.chain);t?t.logo_url=a.logo_url:e.push({...a,value:0})}),e.length>0?e:h.value.slice())}),b=A("0"),h=te([]),T=A(!1),y=A(!1),g=A(!1),w=A(!1),x=A(!1),I=A(0),N=A(!1),$=A(!1),F=A(""),C=A(0),P=A(""),R=A("");function M(){const t=a();if(e.value.chain===t.chain)return oe({tokenAddress:e.value.address,chain:t.chain,spender:se(t.chain)}).then(async a=>{if(a?.address)return e.value={...e.value,...a},1===s.value&&(b.value=e.value.allowance||"0"),f.value=f.value?.map?.(t=>(t.token===e.value.address&&(t={...t,...a,value:a.balance}),t)),a})}function V(){const e=a();if(t.value.chain===e.chain)return oe({tokenAddress:t.value.address,chain:e.chain,spender:se(e.chain)}).then(async e=>{if(e?.address)return t.value={...t.value,...e},0===s.value&&(b.value=t.value.allowance||"0"),f.value=f.value?.map?.(a=>(a.token===t.value.address&&(a={...a,...e,value:e.balance}),a)),e})}function E(){M(),V()}function U(){const e=a(),t=e.chain,l=e.address;l&&t&&ue().then(e=>{f.value="solana"===t?e?.map?.(e=>({...e})):(e?.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token}))?.filter?.(e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag)||[])?.filter(e=>!!Number(e.value)),f.value.length>0&&"solana"!==t&&"sui"!==t&&(/^0x[0-9a-zA-Z]{40}$/.test(l)||ie(l,"tron"))&&re(f.value.map(e=>e.token||""),t).then(e=>{f.value=f.value?.map?.((a,t)=>({...a,value:K(e[t],a?.decimals||0)}))?.filter(e=>!!Number(e.value))})})}function D(a,l){let n=e.value.address,s=e.value.chain;if(!n||!s)return;const u=n+"-"+s;if(e.value.address&&(n=e.value.address),e.value.chain&&(s=e.value.chain),e.value.address===o.token?.token&&(m.value={...o.tokenInfo},e.value={...e.value,address:m.value?.token?.token||"",...m.value?.token}),n&&s){let o=n+"-"+s;const i=c(s),r=i?.wmain_wrapper,v=i?.main_name;n===_&&s&&r&&(o=r+"-"+s);const f=ce(o).then(async l=>{const o=l||{};m.value={...o,...n===_?{token:{...l?.token||{},token:n,symbol:v}}:{}},e.value={...e.value,address:m.value?.token?.token||"",...m.value?.token},"solana"===s?C.value=m.value?.token.current_price_usd?S(m.value.token.current_price_usd):"":(P.value=m.value?.token.current_price_usd?S(m.value?.token?.current_price_usd):"",R.value=m.value?.token.current_price_usd?S(m.value?.token?.current_price_usd):"");const u=l?.pairs?.[0],i=u?.pair;if(!i||"moonshot"===u?.amm||u?.amm?.includes("fourmeme")||"flapswap"===u?.amm||"sunpump"===u?.amm||"dyorswapfun"===u?.amm||u?.target_token!==i&&!new RegExp(u?.target_token,"i").test(i))T.value=!1;else if(T.value=!0,t.value.address!==_&&h.value?.length>0){const e={...h.value?.slice()?.find(e=>e.address===_)};t.value={...e},setTimeout(()=>{a&&a(t.value)},1e3)}u?.amm?.includes("fourmeme")?w.value=!0:w.value=!1,"dyorswapfun"===u?.amm&&["xlayer","gatelayer"]?.includes?.(u?.chain)?N.value=!0:N.value=!1,$.value="xflapswap"===u?.amm&&"xlayer"===u?.chain,x.value="flapswap"===u?.amm;return"sunpump"===u?.amm?I.value=1:l?.pairs?.some(e=>"sunpump"===e.amm)||["TPeoxx1VhUMnAUyjwWfximDYFDQaxNQQ45","TXL6rJbvmjD46zeN1JssfgxvSo99qC8MRT","TAwAg9wtQzTMFsijnSFotJrpxhMm3AqW1d"]?.includes?.(n)?I.value=2:I.value=0,F.value=u?.amm||"",function(a){return new Promise(l=>{const n=p.params?.id||"";let[o,s]=ne(n,1);e.value.address&&(o=e.value.address),e.value.chain&&(s=e.value.chain),o&&"solana"===s?de(o).then(e=>{if(!1===e?.completed){if("So11111111111111111111111111111111111111112"!==t.value.address&&h.value?.length>0){const e={...h.value?.slice()?.find(e=>"So11111111111111111111111111111111111111112"===e.address)};t.value={...e},setTimeout(()=>{a&&a(e)},1e3)}l(!0)}else y.value=!1,l(!1)}):(y.value=!1,l(!1))})}(a).catch(async()=>!1),l}),k=me(u).then(async e=>(d.value={...e,buy_tax:Number(Number(e?.buy_tax||0).toFixed(2)),sell_tax:Number(Number(e?.sell_tax||0).toFixed(2))},l&&l(),e));Promise.all([f,k]).finally(()=>{})}}return{token1:e,token2:t,chain:v,fromToken:i,toToken:r,baseToken:m,baseTokenExtra:d,allowance:b,activeTab:s,swapType:u,isFourMeme:w,isFlap:x,isPump:y,isMoonshot:g,isERC314:T,isSunPump:I,isDyorswapfun:N,isXflapswap:$,userBalanceTokens:f,getTokenDetails:E,getToken2Info:V,getToken1Info:M,getBaseToken:D,swapTokens:k,init:function(){const[a,l]=ne(p.params?.id,1),o=n.chain;a&&a!==e.value.address&&(e.value={address:a||"",chain:l||"",balance:0,symbol:"",decimals:0,logo_url:""}),o===t.value.chain&&t.value.address||(t.value={address:"",chain:o||"",balance:0,symbol:"",decimals:0,logo_url:""}),function(){const a=n.chain||ne(p.params.id).chain||"";pe().then(l=>{h.value=l?.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token,decimals:e.token===_&&"solana"===a?9:e.decimals}))||[],"solana"===a&&(h.value=h.value?.filter?.(e=>e.token!==_).sort(e=>"So11111111111111111111111111111111111111112"===e.token?-1:1)),"sui"===a&&(h.value=h.value?.filter?.(e=>e.token!==_)?.map?.(e=>({...e,token:"0x2::sui::SUI"===e.token?_:e.token,address:"0x2::sui::SUI"===e.token?_:e.token})).sort(e=>e.token===_?-1:1));const n=e.value.address===t.value.address,o=(T.value||w.value||x.value||I.value>0||N.value||$.value)&&t.value.address!==_,s=(y.value||g.value)&&"solana"===a&&"So11111111111111111111111111111111111111112"===t.value.address,u="sui"===a&&"0x2::sui::SUI"!==t.value.address&&t.value.address!==_;if((!t.value.address||n||t.value.chain!==a||o||s||u)&&h.value.length>0){let a=h.value.findIndex(e=>/USDT/.test(e.symbol));a=a<0?h.value.findIndex(e=>/USD/.test(e.symbol)):a,a=a<0?0:a;let l=h.value[a];if(e.value.address===l.address&&(l=0===a?h.value[1]??h.value[0]:h.value[0]),T.value||y.value||g.value||w.value||x.value||I.value>0||u||N.value||$.value){const e=h.value?.slice?.().find(e=>e.address===_||"So11111111111111111111111111111111111111112"===e.address||"0x2::sui::SUI"===e.address);e&&(t.value={...e})}else t.value={...l}}})}(),U(),pe(),D(),E()},getUserTokenList:U}}),ml={key:0,class:"gap"},dl=["onClick"],pl={class:"text"},vl=p(e({__name:"percentStep",props:{activeColor:{type:String,default:""}},emits:["change"],setup(e,{expose:a,emit:t}){const l=t,c=A(0),p=[25,50,75,100],v=(e,a=!1)=>{e===c.value?(c.value=0,l("change",0,a)):(c.value=e,l("change",e,a))};return a({handleClick:v}),(a,t)=>(o(),n("div",{class:"percent-container",style:W({"--percent-active-color":e.activeColor})},[m("div",{for:"percent-radio-0",class:i({active:0===r(c)})},null,2),(o(),n(s,null,u(p,(e,a)=>(o(),n(s,{key:a},[0!==a?(o(),n("div",ml)):b("",!0),m("div",{class:i(["label",{active:e===r(c)}]),onClick:x(a=>v(e),["stop"])},[t[0]||(t[0]=m("div",{class:"bar"},null,-1)),m("div",pl,d(e)+"%",1)],10,dl)],64))),64))],4))}}),[["__scopeId","data-v-9ac60cd3"]]),fl={class:"card-container mt-10px"},kl={class:"flex items-center"},bl=["innerHTML"],hl={class:"flex justify-between items-center mt-10px"},Tl={class:"card-container bottom mt-10px"},yl={class:"flex items-center"},gl=["innerHTML"],wl={class:"flex justify-between items-center mt-10px"},xl={key:0},_l={key:1},Sl=["innerHTML"],Il={class:"swap-label"},Al={class:"slippage-container"},Nl={class:"swap-label_item-left"},$l={style:{display:"flex","align-items":"center"}},Fl={class:"swap-label_item-left"},Cl={class:"swap-label_item-left"},Pl={key:0},Rl={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:da,alt:"",srcset:""},Ml={key:1},Vl={key:1},El={key:0,style:{width:"15px",margin:"1px 5px 0"},src:da,alt:"",srcset:""},Ul={key:1},Dl={key:0},Bl={key:1,class:"path-amm"},Ol=["src"],Hl={key:0,class:"select-token iconfont icon-collapse-down"},jl={key:0},Ll={class:"swap-label_item-left"},zl="2",Wl=p(e({__name:"market",setup(e){const{t:i}=t(),p=k(),y=cl(),w=ae(),I=a(),$=A(!1),F=A(!1),R=A(!1),M=l(()=>y.chain),V=A(!1),E=A(!1),U=A(zl),D=ve("swapSlippage","auto"),L=ve("solanaSlippage","9"),z=ve("suiTonSlippage","2"),q=A(!1),Q=A(!1),Z=A(!1),G=fe("percentStepInf"),Y=A([]),J=A(!1),ee=A(0),ne=A(0),oe=A(0),ue=A([0,0]),ie=A(!1),re=A({fromToken:{symbol:"",decimals:18,address:"",logo_url:""},toToken:{symbol:"",decimals:18,address:"",logo_url:""},gasValue:"0",swapRouterPath:[],isAmountOut:!1}),ce={},me={},de=A("0"),pe=A("0"),Ke=l(()=>{const e=re.value.gasValue;if(!e)return"0";const a=de.value,t=pe.value;return S(new X(e.toString()).times(t).times(a).div(String(10**18)).toFixed()||"0",2)}),Qe=A({}),Ze=l(()=>"auto"===D.value?U.value:D.value),Ge=l(()=>{if(["solana","ton","sui"].includes(y.chain)||y.fromToken.address===_)return!0;if(!y.allowance)return!1;const e=y.fromToken.decimals||0;return ke(new X(ca.value||0).toFixed(Number(e)||0),e).lte(y.allowance)}),Ye=l(()=>{if(!Number(ca.value)&&!Number(ma.value))return"";const e=y.chain;if("solana"===e)return new X(ee.value||0);if("sui"===e)return new X(ne.value||0);const a=na.value.routerPath,t=a?.length>0?a?.[0]:na.value.fromToken||null,l=a?.length>0?a?.[a.length-1]:na.value.toToken||null;if(t&&l){const e=na.value.from_price||0,a=na.value.to_price||0,n=K(t.amount,t.decimals),o=K(l.amount,l.decimals);return new X(n).times(e).div(new X(o).times(a)).minus(1).abs()}return""}),Je=l(()=>Ye.value?S(Ye.value.times(100).toFixed(),2)+"%":""),ea=l(()=>""===Ye.value?"":Ye.value?.gt?.(.4)?"#F81111":Ye.value?.gt?.(.1)?"#F7933F":Ye.value?.gt?.(.05)?"#f8be46":""),aa=l(()=>{if(!I.address||!I.provider)return"#999";if(""!==Ye.value){if(Ye.value?.gt?.(.4))return"#999";if(Ye.value?.gt?.(.1))return"#F7933F"}return 0===y.activeTab?be[0]:1===y.activeTab?he[0]:"#558BED"}),ta=l(()=>{const e=na.value?.totalTax||(na.value?.total_sell_tax||0)+(na.value?.total_buy_tax||0);return e>0?`(${i("tax")}: ${S(e,1)}%)`:0===y.activeTab&&(y.baseTokenExtra?.buy_tax||0)>0?`(${i("tax")}: ${S(y.baseTokenExtra?.buy_tax||0,1)}%)`:1===y.activeTab&&(y.baseTokenExtra?.sell_tax||0)>0?`(${i("tax")}: ${S(y.baseTokenExtra?.sell_tax||0,1)}%)`:""}),la=te([]),na=A({fromToken:{symbol:"",decimals:18,amount:"",address:""},toToken:{symbol:"",decimals:18,amount:"",address:""},fromAmount:"",isAmountOut:!1,isSunPump:0}),oa=A([]),ia=le();N(()=>ia.params.id,()=>{ca.value="",ma.value=""});const ra=A(0),ca=A(""),ma=A(""),pa=A(0),va=A(!1),fa=l(()=>{const e=w?.pairs?.[0]?.amm&&["fourmeme","fourmemev2"]?.includes(w?.pairs?.[0]?.amm),a=w?.pairs?.[0]?.amm&&["viridian","aerodrome","flapswap"].includes(w?.pairs?.[0]?.amm);return"ton"===y.chain||"sui"===y.chain||a||e||y.isDyorswapfun||y.isXflapswap}),{reset:ka,start:ba}=Te(15,{immediate:!0,onComplete:()=>{!function(){if(2!==y.swapType||y.token1.address===y.token2.address)return;if(ie.value||E.value||"hidden"===document.visibilityState)return void ha();R.value?_a():Sa();ha()}()}});function ha(){ka(15),ba()}function Ta(){ha(),va.value&&Ge.value&&!ie.value&&Ha(!1)}function ya(){la.value=[],na.value.totalTax=0,na.value.total_sell_tax=0,na.value.total_buy_tax=0,U.value=zl,ra.value=0,ca.value="",ma.value="",y.getToken1Info(),y.getBaseToken(ga,Ea)}function ga(){la.value=[],na.value.totalTax=0,na.value.total_sell_tax=0,na.value.total_buy_tax=0,U.value=zl,ra.value=0,ca.value="",ma.value="",y.getToken2Info()}function wa(){const e=y.chain;if("solana"!==e){if(e&&e===y.fromToken.chain&&y.fromToken.address){let a=y.isFourMeme?na.value?.quoteResult?.tokenManager:se(e);const t=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][y.isSunPump];a=t||a,"xlayer"===e&&y.isDyorswapfun&&(a="0xfd947a61e2c54413031ddb1f754dbe0e696efa09"),"xlayer"===e&&y.isXflapswap&&(a="0xb30d8c4216e1f21f27444d2ffaee3ad577808678"),"gatelayer"===e&&y.isDyorswapfun&&(a="0xC5d6974951201FB5f20C0efB4B6BEF5cf8FF1617"),$.value=!0,we(y.fromToken.address,a).then(e=>{y.allowance=e.toString()}).finally(()=>{$.value=!1})}}else y.allowance=ge}function xa(e,a=!1){if(a)return;const t=Number(e)/100;let l=y.fromToken.balance||0;if(t){const e=y.fromToken.decimals||0;if(y.fromToken?.address===_||"So11111111111111111111111111111111111111112"===y.fromToken?.address){const a=y.fromToken.chain,n=xe[a]||.01;if(new X(l).lt(n))return void H.alert(i("balanceNotEnough",{n:n,s:y.fromToken.symbol}),i("tips"));l=new X(l).minus(n).times(t).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))?.[0]||""}else l=new X(l).times(t).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))?.[0]||"";0===Number(l)&&(l="")}else l="";ca.value!==l&&(ca.value=Number(l)<0?"0":l,_a())}function _a(){if(F.value&&!R.value)return;const e=ca.value,a=Number(e);""===e||"."===e?(ca.value="",ma.value="",F.value=!1):0===a&&0!==Number(ma.value)?(ma.value="0",F.value=!1):a&&(R.value=!0,ma.value="",Aa())}function Sa(){if(F.value&&!R.value)return;const e=ma.value,a=Number(e);""===e||"."===e?(ca.value="",ma.value="",F.value=!1):0===a&&0!==Number(ca.value)?(ca.value="0",F.value=!1):a&&(R.value=!1,ca.value="",Aa(!1))}let Ia=null;function Aa(e=!0){Va()&&(Number(ca.value)||Number(ma.value)?y.token1.address!==y.token2.address&&(Ia&&(clearTimeout(Ia),Ia=null),Ia=setTimeout(()=>{!async function(e,a){if((ca.value||ma.value)&&y.fromToken.address&&y.toToken.address&&a===y.fromToken.chain){const l=y.fromToken.decimals,n=y.toToken.decimals;if("sui"===a)return void async function(e,a){if("sui"===a){const a=y.fromToken.decimals||y.fromToken?.decimal,t=y.toToken.decimals||y.toToken?.decimal,l=y.fromToken.address===_?new X(ca.value||0).times("0.997"):new X(ca.value||0),n={tokenIn:y.fromToken.address===_?"0x2::sui::SUI":y.fromToken.address,tokenOut:y.toToken.address,amountIn:ke(l.toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${a}})?`))?.[0]||0,a).toFixed(0),slippage:new X(z.value).div(100).toNumber()};F.value=!0,Pe(n).then(a=>(a.returnAmount&&a.returnAmountWithDecimal||a.amount_out?(ce.value=a,e&&(ma.value=a?.returnAmount||K(a?.amount_out||"0",a?.to_token?.decimals||t||y.toToken?.decimals)),$a()):Ie("can not get quote"),Ha(!1),F.value=!1,a)).catch(e=>(Ie(e?.error||e),Promise.resolve(""))).finally(()=>{setTimeout(()=>{F.value=!1,Ta()},800)})}}(e,a);if("solana"===a)return void function(e,a){if("solana"===a){if(!!((y.isPump||y.isMoonshot)&&"So11111111111111111111111111111111111111112"!==y.token2.address&&"solana"===y.token2.chain))return;const a=y.fromToken.decimals,t=y.toToken.decimals,l={inputMint:y.fromToken.address,inputDecimals:a,inputMintSymbol:y.fromToken.symbol,inputMintName:y.fromToken.symbol,inputAmount:ca.value||0,outputMint:y.toToken.address,outputDecimals:t,outputMintSymbol:y.toToken.symbol,outputMintName:y.toToken.symbol,amount:e?ke(new X(ca.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${a}})?`))?.[0]||0,a).toFixed(0):ke(new X(ma.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t}})?`))?.[0]||0,t).toFixed(0),slippageBps:new X(L.value).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:L.value||9,isPump:y.isPump,isMoonshot:y.isMoonshot};if(Na.amount&&Object.keys(Na).every(e=>l[e]===Na[e]))return;Na={...l},setTimeout(()=>{Na={}},15e3),F.value=!0,Re(l).then(l=>(l.routeInfo&&l.transaction?(me.value=l,ma.value=l.routeInfo?.amountOut?.amount?.toFixed()||"0",$a()):e?l.outAmount?(me.value=l,ma.value=K(l.outAmount||"0",t||y.toToken?.decimals),$a()):Ie("can not get quote"):l.inAmount?(me.value=l,ca.value=K(l.inAmount||"0",a||y.fromToken?.decimals),$a()):Ie("can not get quote"),Ha(!1),l)).catch(e=>(Ie(e?.error||e),Promise.resolve(""))).finally(()=>{setTimeout(()=>{F.value=!1,Na={},Ta()},800)})}}(e,a);if("bsc"===a){if(!!((y.isFourMeme||y.isFlap)&&y.token2.address!==_&&"bsc"===y.token2.chain))return}if("tron"===a){if(!!(y.isSunPump>0&&y.token2.address!==_&&"tron"===y.token2.chain))return}if("xlayer"===a){if(!!((y.isDyorswapfun||y.isXflapswap)&&y.token2.address!==_&&"xlayer"===y.token2.chain))return}F.value=!0;const o={from_token:y.fromToken.address,to_token:y.toToken.address,amountIn:e?ke(new X(ca.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${l}})?`))?.[0]||0,l).toFixed(0):"0",amountOut:e?"0":ke(new X(ma.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))?.[0]||0,n).toFixed(0)};if(y.isFourMeme){try{const t=await _e(o,a);e?ma.value=K(t?.amountOut||"0",y.toToken?.decimals):ca.value=K(t?.amountIn||"0",y.fromToken?.decimals),la.value=[{symbol:y.fromToken?.symbol,nextAmm:"fourmeme"},{symbol:y.toToken?.symbol,nextAmm:""}],na.value.fromAmount=ke(ca.value,y.fromToken?.decimals).toFixed(0),na.value.toAmount=ke(ma.value,y.toToken?.decimals).toFixed(0),na.value.fromToken={...y.fromToken,amount:na.value.fromAmount},na.value.toToken={...y.toToken,amount:na.value.toAmount},na.value.quoteResult={...t},na.value.isAmountOut=!e,na.value.isFourMeme=!0,wa();const[l,n]=[y.fromToken?.address+"-"+y.fromToken?.chain,y.toToken?.address+"-"+y.toToken?.chain];Se([l,n]).then(async e=>{na.value.from_price=e?.[0]?.current_price_usd||0,na.value.to_price=e?.[1]?.current_price_usd||0,na.value.isFourMeme=!0}),F.value=!1}catch(t){F.value=!1,Ie(t)}return}if(y.isDyorswapfun){try{const[t,l]=[y.fromToken?.address+"-"+y.fromToken?.chain,y.toToken?.address+"-"+y.toToken?.chain],n=await Se([t,l]),s=n?.[0]?.current_price_usd||0,u=n?.[1]?.current_price_usd||0,i=Ae({...o,from_price:s,to_price:u,pairs:y.baseToken?.pairs||[]},a);ma.value=K(i||"0",y.toToken?.decimals),la.value=[{symbol:y.fromToken?.symbol,nextAmm:"dyorswapfun"},{symbol:y.toToken?.symbol,nextAmm:""}],na.value.fromAmount=ke(ca.value,y.fromToken?.decimals).toFixed(0),na.value.toAmount=ke(ma.value,y.toToken?.decimals).toFixed(0),na.value.fromToken={...y.fromToken,amount:na.value.fromAmount},na.value.toToken={...y.toToken,amount:na.value.toAmount},na.value.isAmountOut=!e,na.value.isDyorswapfun=!0,wa(),na.value.from_price=s,na.value.to_price=u,F.value=!1}catch(t){F.value=!1,Ie(t)}return}if(y.isXflapswap){try{const t=await Ne(o,a);e?ma.value=K(t?.toString()||"0",y.toToken?.decimals):ca.value=K(t?.toString()||"0",y.fromToken?.decimals),la.value=[{symbol:y.fromToken?.symbol,nextAmm:"xflapswap"},{symbol:y.toToken?.symbol,nextAmm:""}],na.value.fromAmount=ke(ca.value,y.fromToken?.decimals).toFixed(0),na.value.toAmount=ke(ma.value,y.toToken?.decimals).toFixed(0),na.value.fromToken={...y.fromToken,amount:na.value.fromAmount},na.value.toToken={...y.toToken,amount:na.value.toAmount},na.value.quoteResult={...t},na.value.isAmountOut=!e,na.value.isXflapswap=!0,wa();const[l,n]=[y.fromToken?.address+"-"+y.fromToken?.chain,y.toToken?.address+"-"+y.toToken?.chain];Se([l,n]).then(async e=>{na.value.from_price=e?.[0]?.current_price_usd||0,na.value.to_price=e?.[1]?.current_price_usd||0,na.value.isXflapswap=!0}),F.value=!1}catch(t){F.value=!1,Ie(t)}return}if("tron"===a&&y.isSunPump>0){try{const t=await $e({...o,isSunPump:y.isSunPump},a);e?ma.value=K(t?.amountOut||"0",y.toToken?.decimals):ca.value=K(t?.amountIn||"0",y.fromToken?.decimals),la.value=[{symbol:y.fromToken?.symbol,nextAmm:"sunpump"},{symbol:y.toToken?.symbol,nextAmm:""}],na.value.fromAmount=ke(ca.value,y.fromToken?.decimals).toFixed(0),na.value.toAmount=ke(ma.value,y.toToken?.decimals).toFixed(0),na.value.fromToken={...y.fromToken,amount:na.value.fromAmount},na.value.toToken={...y.toToken,amount:na.value.toAmount},na.value.quoteResult={...t},na.value.isAmountOut=!e,na.value.isSunPump=y.isSunPump,wa();const[l,n]=[y.fromToken?.address+"-"+y.fromToken?.chain,y.toToken?.address+"-"+y.toToken?.chain];Se([l,n]).then(async e=>{na.value.from_price=e?.[0]?.current_price_usd||0,na.value.to_price=e?.[1]?.current_price_usd||0,na.value.isSunPump=y.isSunPump}),F.value=!1}catch(t){F.value=!1,Ie(t)}return}const s=y.baseToken?.pairs;if(s?.[0]?.target_token===s?.[0]?.pair&&s?.[0]?.pair&&"xlayer"!==a){const t=await Fe(o,a);if(t){e?ma.value=K(t||"0",y.toToken?.decimals):ca.value=K(t||"0",y.fromToken?.decimals),y.isERC314=!0,la.value=[{symbol:y.fromToken?.symbol,nextAmm:s?.[0]?.amm},{symbol:y.toToken?.symbol,nextAmm:""}],na.value.fromAmount=ke(ca.value,y.fromToken?.decimals).toFixed(0),na.value.toAmount=ke(ma.value,y.toToken?.decimals).toFixed(0),na.value.fromToken={...y.fromToken,amount:na.value.fromAmount},na.value.toToken={...y.toToken,amount:na.value.toAmount};const[a,l]=[y.fromToken?.address+"-"+y.fromToken?.chain,y.toToken?.address+"-"+y.toToken?.chain];return Se([a,l]).then(async e=>{na.value.from_price=e?.[0]?.current_price_usd||0,na.value.to_price=e?.[1]?.current_price_usd||0,na.value.isERC314=!0}),void(F.value=!1)}}let u="";if("core"===a&&(s?.length||0)>0){const e=s?.find?.(e=>{const a=[e.token0_address,e.token1_address];return a.includes(o.from_token)||a.includes(o.to_token)})||s?.[0],a=e?.amm||"",t={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};u=t?.[a]||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f"}y.isERC314=!1,Ce(o,u,a).then(e=>{oa.value=e,Ma(e),function(){Ca&&(clearTimeout(Ca),Ca=null);Ca=setTimeout(()=>{Fa()&&Ge.value&&I.address&&!V.value&&((na.value?.isSunPump||0)>0?Me(na.value,Ze.value).then(async e=>{Qe.value={...e,isSunPump:na.value?.isSunPump},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=la.value}).catch(e=>{Ie(e)}):na.value?.isFourMeme?Ve(na.value,Ze.value).then(async e=>{Qe.value={...e,isFourMeme:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=la.value}).catch(e=>{Ie(e)}):na.value?.isERC314?Ee(na.value).then(async e=>{Qe.value={...e,isERC314:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=la.value}).catch(e=>{Ie(e)}):na.value?.isDyorswapfun?Ue(na.value,Ze.value).then(async e=>{Qe.value={...e,isDyorswapfun:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=la.value}).catch(e=>{Ie(e)}):na.value?.isXflapswap?De(na.value,Ze.value).then(async e=>{Qe.value={...e,isXflapswap:!0},re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=la.value}).catch(e=>{Ie(e)}):na.value?.routerPath?.length>0&&(Be(na.value,Ze.value).then(async e=>{Qe.value=e,re.value=e.swapInfo,re.value.gasValue=e.gasValue,re.value.swapRouterPath=la.value}).catch(e=>{Ie(e)}),Pa(),Ra()))},3e3)}()}).catch(a=>{Ie(a),e?ma.value="":ca.value=""}).finally(()=>{setTimeout(()=>{F.value=!1,Ta()},800)})}}(e,I.chain||"")},500)):F.value=!1)}let Na={};function $a(){const e=y.fromToken.chain,a=y.fromToken.address+"-"+e,t=y.toToken.address+"-"+e;return sessionStorage.swap_tokenPrice===a+"-"+t?(ue.value=[0,0],"solana"===e?ee.value=0:"ton"===e?oe.value=0:"sui"===e&&(ne.value=0)):sessionStorage.swap_tokenPrice=a+"-"+t,Se([a,t]).then(async a=>{const t=a?.[0]?.current_price_usd||0,l=a?.[1]?.current_price_usd||0;ue.value=[t,l];const n=ca.value||0,o=ma.value||0,s=Math.abs(Number(n)*t/(Number(o)*l)-1);"solana"===e?ee.value=s:"ton"===e?oe.value=s:"sui"===e&&(ne.value=s)})}function Fa(){if(!I.provider)return!0;const e=y.fromToken.balance||0,a=(y.isPump||y.isMoonshot)&&"So11111111111111111111111111111111111111112"!==y.token2.address,t=(y.isFourMeme||y.isFlap||y.isDyorswapfun||y.isXflapswap)&&y.token2.address!==_,l=y.isSunPump>0&&y.token2.address!==_;return!(0===Number(e)||Number(e)<Number(ca.value)||!I.provider||"0"===String(ca.value)||y.token1.address===y.token2.address||a||t||l)}let Ca=null;function Pa(){const e=y.token1.chain,a=y.token2.chain,t=I.chain;t&&t===e&&t===a&&Oe(t).then(e=>{pe.value=e})}function Ra(){const e=I.chain;if("solana"===e)return;const a=y.token1.chain,t=y.token2.chain;e&&a===t&&e===a&&He(e).then(e=>{de.value=e?.toString()||"0"}).catch(e=>{de.value="0"})}function Ma(e=oa.value){const a=e[ra.value],t=e[ra.value].routerPath,l=R.value,n=y.fromToken.decimals,o=y.toToken.decimals;let s=!1;if(l){s=ke(new X(ca.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))?.[0]||"0",n).toFixed(0)===(t[0]?.amount||0)}else{s=ke(new X(ma.value||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`))?.[0]||"0",o).toFixed(0)===(t[t.length-1]?.amount||0)}if(!s)return;if(1===a.from_cannot_sell_all){const e=new X(ke(String(y.fromToken.balance),y.fromToken?.decimals).toFixed(0)),t=new X(a?.routerPath[0].amount);q.value=e.gt(0)&&t.div(e).gt(.99999)}else q.value=!1;Q.value=(a?.totalTax||0)>0||(a?.total_sell_tax||0)>0||(a?.total_buy_tax||0)>0;const u=function(e){if(!Number(ca.value)&&!Number(ma.value))return new X(0);const a=e.routerPath,t=a?.length>0?a?.[0]:null,l=a?.length>0?a?.[a.length-1]:null;if(t&&l){const a=e.from_price,n=e.to_price,o=K(t.amount,t.decimals),s=K(l.amount,l.decimals);return new X(o).times(a).div(new X(s).times(n)).minus(1).abs().times(100)}return new X(0)}(a);if(Q.value||u.gt(.5)){Z.value=(a?.total_sell_tax||0)+(a?.total_buy_tax||0)+1>49.99;const e=a.totalTax||(a.total_sell_tax||0)+(a.total_buy_tax||0),t=Number(u);if("auto"===D.value){let a=e+t+(e>5||t>5?2.5:2);a=Math.max(Math.min(a,49.99),.5),U.value=String(Number(a.toFixed(2)))}}else Z.value=!1,"auto"===D.value&&(U.value=zl);if(na.value=a,la.value=t.map((e,t)=>({symbol:e.symbol,nextAmm:a?.pair_path?.[t]?.amm||""})),Y.value=oa.value.map(e=>{let a=0,t=0;if(R.value){const t=e.routerPath[e.routerPath.length-1];a=K(t.amount||"0",t?.decimals||y.toToken?.decimals)}else{const a=e.routerPath[0];t=K(a.amount||"0",a?.decimals||y.fromToken.decimals)}return{path:e.routerPath.map((a,t)=>({symbol:a.symbol,nextAmm:e?.pair_path?.[t]?.amm||""})),amount:R.value?a:t,priceImpact:e.priceImpact}}),R.value){const e=t[t.length-1];ma.value=K(e.amount||"0",e?.decimals||y.toToken?.decimals)}else{const e=t[0];ca.value=K(e.amount||"0",e?.decimals||y.fromToken?.decimals)}s&&setTimeout(()=>{F.value=!1,Ta()},800)}function Va(){const e=I.chain,a=Object.keys(je).concat(["solana","sui"]),t=y.token1.chain,l=y.token2.chain;return!(t&&!a?.includes?.(t))&&(!(l&&!a?.includes?.(l))&&(!!e&&(!(e&&!a?.includes?.(e))&&(e===t&&e===l))))}function Ea(){if(1===y.activeTab){if(Number(U.value)>Number(y.baseTokenExtra?.sell_tax)+1)return;const e=Math.max(Math.min(Number(y.baseTokenExtra?.sell_tax)+1,49.99),.5);U.value=String(Number(e.toFixed(2)))}else{if(Number(U.value)>Number(y.baseTokenExtra?.buy_tax)+1)return;const e=Math.max(Math.min(Number(y.baseTokenExtra?.buy_tax)+1,49.99),.5);U.value=String(Number(e.toFixed(2)))}}function Ua(){const e=I.chain,a=Object.keys(je).concat(["solana","sui"]),t=c(e),l=t?.name||"",n=y.token1.chain,o=y.token2.chain,s=c(n)?.name,u=c(o)?.name;return n&&!a?.includes?.(n)?i("noSupportChain",{chain:s}):o&&!a?.includes?.(o)?i("noSupportChain",{chain:u}):e&&!a?.includes?.(e)?i("noSupportChain",{chain:l}):e!==n&&n||e!==o&&o?i("chainNotSame1"):n!==o?i("tokenNoSameChain"):void 0}function Da(){try{if(!I.provider)return void(I.provider||H.alert(i("browserWalletNotDetected"),i("tips"),{confirmButtonText:i("confirm")}));if(!Va())return;const e=I.chain;if(e!==(y.token1.chain||y.token2.chain||e))return void H.alert(i("plsSwitchChain",{chain:e}),i("tips"),{confirmButtonText:i("confirm")});2===y.swapType&&(pa.value=1,Ge.value?Ha():async function(){E.value=!0;let e=y.isFourMeme?na.value?.quoteResult?.tokenManager:se(M.value);const a=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][y.isSunPump];e=a||e,"xlayer"===I.chain&&y.isDyorswapfun&&(e="0xfd947a61e2c54413031ddb1f754dbe0e696efa09");"xlayer"===I.chain&&y.isXflapswap&&(e="0xb30d8c4216e1f21f27444d2ffaee3ad577808678");"gatelayer"===I.chain&&y.isDyorswapfun&&(e="0xC5d6974951201FB5f20C0efB4B6BEF5cf8FF1617");Le(y.fromToken.address,e).then(e=>e.wait()).then(e=>{wa()}).catch(e=>{Ie(e)}).finally(()=>{E.value=!1})}())}catch(e){}}function Oa(){const e=y.fromToken.balance||0,a=(y.isPump||y.isMoonshot)&&"So11111111111111111111111111111111111111112"!==y.token2.address,t=(y.isFourMeme||y.isFlap||y.isDyorswapfun||y.isXflapswap)&&y.token2.address!==_,l=y.isSunPump>0&&y.token2.address!==_,n=I.address;return n?n&&!I.provider?i("observeAddressNotSwap"):y.isERC314&&y.token2.address!==_||a||t||l?i("ERC314Tips"):0===Number(e)||Number(e)<Number(ca.value)||!n?i("insufficientBalance"):"0"===String(ca.value)?i("AmountCannotBeZero"):void 0:i("pConnectWallet")}function Ha(e=!0){if(Ca&&(clearTimeout(Ca),Ca=null),Fa())if("sui"===y.chain){const a=ce?.routes?.[0]?.hops?.[0]?.pool?.type,t=[y.fromToken,y.toToken].map((e,t)=>({symbol:e.symbol,nextAmm:0===t&&a||""}));re.value={swapRouterPath:t,fromAmount:ca.value,toAmount:ma.value,fromToken:y.fromToken,toToken:y.toToken,isAmountOut:!1},e&&(va.value=!0),la.value=t}else if("solana"===y.chain){const a=[y.fromToken,y.toToken].map(e=>({symbol:e.symbol,nextAmm:""}));re.value={swapRouterPath:a,fromAmount:ca.value,toAmount:ma.value,fromToken:y.fromToken,toToken:y.toToken,isAmountOut:!1},e&&(va.value=!0)}else(na.value?.isSunPump||0)>0?(V.value=!0,Me(na.value,Ze.value).then(async a=>{Qe.value={...a,isSunPump:na.value?.isSunPump},re.value=a.swapInfo,re.value.gasValue=a.gasValue,re.value.swapRouterPath=la.value,V.value=!1,e&&(va.value=!0)}).catch(e=>{V.value=!1,Ie(e)}),Pa(),Ra()):na.value?.isFourMeme?(V.value=!0,Ve(na.value,Ze.value).then(async a=>{Qe.value={...a,isFourMeme:!0},re.value=a?.swapInfo,re.value.gasValue=a?.gasValue||"0",re.value.swapRouterPath=la.value,V.value=!1,e&&(va.value=!0)}).catch(e=>{V.value=!1,Ie(e)}),Pa(),Ra()):na.value?.isERC314?(V.value=!0,Ee(na.value).then(async a=>{Qe.value={...a,isERC314:!0},re.value=a.swapInfo,re.value.gasValue=a.gasValue,re.value.swapRouterPath=la.value,V.value=!1,e&&(va.value=!0)}).catch(e=>{V.value=!1,Ie(e)}),Pa(),Ra()):na.value?.isDyorswapfun?(V.value=!0,Ue(na.value,Ze.value).then(async a=>{Qe.value={...a,isDyorswapfun:!0},re.value=a?.swapInfo,re.value.gasValue=a?.gasValue||"0",re.value.swapRouterPath=la.value,V.value=!1,e&&(va.value=!0)}).catch(e=>{V.value=!1,Ie(e)}),Pa(),Ra()):na.value?.isXflapswap?(V.value=!0,De(na.value,Ze.value).then(async a=>{Qe.value={...a,isXflapswap:!0},re.value=a?.swapInfo,re.value.gasValue=a?.gasValue||"0",re.value.swapRouterPath=la.value,V.value=!1,e&&(va.value=!0)}).catch(e=>{V.value=!1,Ie(e)}),Pa(),Ra()):na.value?.routerPath?.length>0&&(V.value=!0,Be(na.value,Ze.value).then(async a=>{Qe.value=a,re.value={...a.swapInfo,fromToken:{...a.swapInfo.fromToken,...y.fromToken},toToken:{...a.swapInfo.fromToken,...y.toToken},fromAmount:ca.value,toAmount:ma.value,isAmountOut:a.swapInfo.isAmountOut||!1},re.value.gasValue=a.gasValue,re.value.swapRouterPath=la.value,V.value=!1,e&&(va.value=!0)}).catch(e=>{V.value=!1,Ie(e)}),Pa(),Ra());else H.alert(Oa(),i("tips"),{confirmButtonText:i("okay")})}function ja(e,a){H.alert(a,e,{confirmButtonText:i("getIt")}).then(()=>{})}function La(){if(!ca.value||!ma.value)return"--";let e=ca.value,a=ma.value;if(Q.value){let t=na.value?.totalTax||(na.value?.total_sell_tax||0)+(na.value?.total_buy_tax||0);t=Math.min(49,t),na.value?.isAmountOut?e=new X(e).times(100+t).div(100):a=new X(a).times(100-t).div(100)}const t=["solana","sui"].includes(M.value),l=t?ue.value[0]:na.value.from_price,n=t?ue.value[1]:na.value.to_price;return l&&n?0===y.activeTab?S(Number(ca.value||0)/Number(ma.value)/(n/l)*n):1===y.activeTab?S(Number(ma.value||0)/Number(ca.value)/(l/n)*l):void 0:"--"}function za(e){J.value=!1,ra.value=e,Ma()}async function Wa(e=Qe.value){try{if("solana"===M.value)return void async function(){try{pa.value=1,ie.value=!0,V.value=!0;const e=re.value,a={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:Number(K(e.fromTokenAmount||0,e.fromToken.decimals)),to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:Number(K(e.toTokenAmount||0,e.toToken.decimals)),chain:I.chain,transaction:"",wallet_address:I.address};setTimeout(()=>{va.value||(V.value=!1,ie.value=!1)},6e3),ze(me.value).then(t=>(re.value.transaction=t.hash,sa({chain:"solana",destination:"true"===localStorage.solanaProtection?"v1/blxrsol/sendSolTx":"/ave_nodes/rpc/solana/sendFastSwapTx",type:10,tx_hash:t.hash,status:1,wallet:I.address,out_token:a.to_address,out_amount:e.toAmount,in_token:a.from_address,in_amount:e.fromAmount}),V.value=!1,ie.value=!1,ca.value="",ma.value="",G.value?.handleClick?.(0),pa.value=3,t.wait())).then(e=>(e&&(ua({chain:"solana",tx_hash:e?.transaction?.signatures[0],status:100}),y.getTokenDetails(),y.getUserTokenList()),e)).catch(e=>{"Timeout"===(e||e?.message)?We({type:"error",message:i("timeout_error")}):"Swap fail"===(e||e?.message)?We({type:"error",message:i("swapFail")}):Ie(e,"solana"),ha(),V.value=!1,ie.value=!1})}catch(e){V.value=!1,ie.value=!1,Ie(e,"solana")}}();if("sui"===M.value)return void async function(){try{ie.value=!0,V.value=!0,pa.value=2;const e=re.value,a={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:e?.fromAmount,from_decimals:e?.fromToken.decimals,to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:e?.toAmount,to_decimals:e?.toToken.decimals,chain:"sui",transaction:"",wallet_address:I.address};setTimeout(()=>{va.value||(V.value=!1,ie.value=!1)},6e3);const t=!0;qe({quoteResponse:ce.value,slippage:new X(z.value).div(100).toNumber()}).then(e=>Xe(e?.tx||e)).then(e=>e?.digest?(re.value.transaction=e.digest,t&&(a.transaction=e.digest,sa({chain:"sui",destination:"wallet rpc",type:10,tx_hash:e.digest,status:1,wallet:I.address,out_token:a.to_address,out_amount:re.value.toAmount,in_token:a.from_address,in_amount:re.value.fromAmount})),V.value=!1,ie.value=!1,ca.value="",ma.value="",G.value?.handleClick?.(0),pa.value=3,e.wait()):Promise.reject("Swap fail")).then(e=>{if(e.digest)return ua({chain:"sui",tx_hash:e?.digest,status:100}),We({type:"success",message:i("tradeSuccess")}),y.getTokenDetails(),y.getUserTokenList(),e}).catch(e=>{pa.value=1,V.value=!1,ie.value=!1,Ie(e,"solana"),ha()})}catch(e){pa.value=1,V.value=!1,ie.value=!1,Ie(e,"solana")}}();ie.value=!0,V.value=!0;await e.swapCallStatic();const a=e.swapInfo,t=(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH,{from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(K(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(K(a.toTokenAmount||0,a.toToken.decimals)),chain:M.value,transaction:"",wallet_address:I.address});pa.value=2,Qe.value.swap().then(e=>(re.value.transaction=e.hash,sa({chain:M.value,destination:"wallet rpc",type:10,tx_hash:e.hash,status:1,wallet:I.address,out_token:t.to_address,out_amount:Number(K(a.toTokenAmount||0,a.toToken.decimals)),in_token:t.from_address,in_amount:Number(K(a.fromTokenAmount||0,a.fromToken.decimals))}),V.value=!1,ie.value=!1,ca.value="",ma.value="",G.value?.handleClick?.(0),pa.value=3,e.wait())).then(e=>(ua({chain:M.value,tx_hash:e.hash,status:100,to:e?.to?.toLowerCase?.()||""}),ra.value=0,oa.value=[],setTimeout(()=>{y.getTokenDetails(),y.getUserTokenList(),wa(),"tron"!==y.token1.chain&&"tron"!==y.token2.chain||setTimeout(()=>{y.getTokenDetails()},3e3)},1e3),e)).catch(e=>{pa.value=1,ha(),V.value=!1,ie.value=!1,Ie(e,"swap")})}catch(a){V.value=!1,ie.value=!1,Ie(a,"swap")}}return N([()=>y.fromToken.address,()=>I.address],()=>{y.fromToken.address&&wa()}),N([()=>y.fromToken.address,()=>y.toToken.address],()=>{ca.value="",ma.value="",ra.value=0,ha()}),(e,a)=>{const t=P,l=B,i=g;return o(),n(s,null,[m("form",{class:"swap-container",action:"",onSubmit:x(Da,["prevent","stop"])},[m("div",fl,[m("div",kl,[T(Ba,{token:r(y).token1,"onUpdate:token":[a[0]||(a[0]=e=>r(y).token1=e),ya],tokens:r(y).swapTokens,chain:r(y).chain},null,8,["token","tokens","chain"]),a[26]||(a[26]=m("span",{style:{flex:"1"}},null,-1)),m("div",{class:"s-text",innerHTML:`${e.$t("balance1")}: ${r(S)(r(y).token1?.balance||0)}`},null,8,bl),1===r(y).activeTab?(o(),n("button",{key:0,class:"max-btn",type:"button",onClick:a[1]||(a[1]=x(e=>xa(100),["stop"]))},d(e.$t("max")),1)):b("",!0)]),m("div",hl,[0===r(y).activeTab?(o(),v(t,{key:0,modelValue:r(ma),"onUpdate:modelValue":[a[2]||(a[2]=e=>C(ma)?ma.value=e:null),a[3]||(a[3]=e=>{ma.value=e?.replace?.(/\-|[^\d.]/g,""),Sa()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",readonly:r(fa),onFocus:a[4]||(a[4]=e=>r(G)?.handleClick(0,!0))},null,8,["modelValue","readonly"])):b("",!0),1===r(y).activeTab?(o(),v(t,{key:1,modelValue:r(ca),"onUpdate:modelValue":[a[5]||(a[5]=e=>C(ca)?ca.value=e:null),a[6]||(a[6]=e=>{ca.value=e?.replace?.(/\-|[^\d.]/g,""),_a()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",onFocus:a[7]||(a[7]=e=>r(G)?.handleClick(0,!0))},null,8,["modelValue"])):b("",!0)])]),m("div",Tl,[m("div",yl,[T(Ba,{token:r(y).token2,"onUpdate:token":[a[8]||(a[8]=e=>r(y).token2=e),ga],tokens:r(y).swapTokens,chain:r(y).chain},null,8,["token","tokens","chain"]),a[27]||(a[27]=m("span",{style:{flex:"1"}},null,-1)),m("div",{class:"s-text",innerHTML:`${e.$t("balance1")}: ${r(S)(r(y).token2.balance||0)}`},null,8,gl),0===r(y).activeTab?(o(),n("button",{key:0,class:"max-btn",type:"button",onClick:a[9]||(a[9]=x(e=>xa(100),["stop"]))},d(e.$t("max")),1)):b("",!0)]),m("div",wl,[1===r(y).activeTab?(o(),v(t,{key:0,modelValue:r(ma),"onUpdate:modelValue":[a[10]||(a[10]=e=>C(ma)?ma.value=e:null),a[11]||(a[11]=e=>{ma.value=e?.replace?.(/\-|[^\d.]/g,""),Sa()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",readonly:r(fa),onFocus:a[12]||(a[12]=e=>r(G)?.handleClick(0,!0))},null,8,["modelValue","readonly"])):b("",!0),0===r(y).activeTab?(o(),v(t,{key:1,modelValue:r(ca),"onUpdate:modelValue":[a[13]||(a[13]=e=>C(ca)?ca.value=e:null),a[14]||(a[14]=e=>{ca.value=e?.replace?.(/\-|[^\d.]/g,""),_a()})],placeholder:"0.0",size:"large",clearable:"",class:"input-number","input-style":"text-align:right",onFocus:a[15]||(a[15]=e=>r(G)?.handleClick(0,!0))},null,8,["modelValue"])):b("",!0)])]),T(vl,{ref:"percentStepInf",activeColor:0===r(y).activeTab?("upColor"in e?e.upColor:r(be))[0]:("downColor"in e?e.downColor:r(he))[0],onChange:xa},null,8,["activeColor"]),r(I).address?r(I).address&&!r(I).provider?(o(),v(l,{key:1,"native-type":"button",class:"submit-btn",disabled:"",color:"#555555"},{default:f(()=>[O(d(e.$t("watchWalletNotSwap")),1)]),_:1})):Va()?r(Ge)?(o(),v(l,{key:4,class:"submit-btn",loading:r(V)||r(F)||r($),color:r(aa),disabled:r(Ye)&&r(Ye)?.gt?.(.4)||!Fa()||!r(ca)||!r(ma),"native-type":"submit"},{default:f(()=>[0===Number(r(y).fromToken.balance)||Number(r(y).fromToken.balance)<Number(r(ca))||""===r(I).address||(r(y).isERC314||r(y).isFourMeme||r(y).isFlap||r(y).isSunPump>0||r(y).isDyorswapfun||r(y).isXflapswap)&&r(y).token2.address!==("NATIVE_TOKEN"in e?e.NATIVE_TOKEN:r(_))||(r(y).isPump||r(y).isMoonshot)&&"So11111111111111111111111111111111111111112"!==r(y).token2.address?(o(),n("span",xl,d(Oa()),1)):r(Ye)&&r(Ye)?.gt?.(.4)?(o(),n("span",_l,d(e.$t("priceImpactTooHigh")),1)):(o(),n(s,{key:2},[m("span",null,d(r(Ye)&&r(Ye)?.gt?.(.1)?0===r(y).activeTab?e.$t("buyAnyway"):e.$t("sellAnyway"):0===r(y).activeTab?e.$t("buy"):e.$t("sell"))+" "+d(r(y).token1?.symbol||""),1),r(ta)?(o(),n("span",{key:0,style:{"font-size":"12px"},innerHTML:r(ta)},null,8,Sl)):b("",!0)],64))]),_:1},8,["loading","color","disabled"])):(o(),v(l,{key:3,class:"submit-btn",color:r(aa),"native-type":"submit",loading:r(E)||r(V)||r($),disabled:Number(r(y).fromToken.balance)<Number(r(ca))},{default:f(()=>[O(d(0===Number(r(y).fromToken.balance)||Number(r(y).fromToken.balance)<Number(r(ca))||""===r(I).address?r(Ye)&&r(Ye)?.gt?.(.4)?e.$t("priceImpactTooHigh"):Oa()||e.$t("approve"):e.$t("approve")),1)]),_:1},8,["color","loading","disabled"])):(o(),v(l,{key:2,"native-type":"button",class:"submit-btn",disabled:"",color:"#555555"},{default:f(()=>[O(d(Ua()),1)]),_:1})):(o(),v(l,{key:0,"native-type":"button",class:"submit-btn",color:"#286DFF",onClick:a[16]||(a[16]=x(a=>("useBotStore"in e?e.useBotStore:r(ye))().changeConnectVisible(!0,1),["stop"]))},{default:f(()=>[O(d(e.$t("pConnectWallet")),1)]),_:1})),m("ul",Il,[m("li",Al,[m("span",null,d(e.$t("slippage")),1),T(i,{class:"ml-2px color-[--secondary-text]! clickable",name:"material-symbols:help-outline",onClick:a[17]||(a[17]=x(a=>ja(e.$t("slippage"),e.$t("minimumReceivedTips")),["stop"]))}),a[28]||(a[28]=m("span",{style:{flex:"1"}},null,-1)),"solana"===r(M)?(o(),v(Ga,{key:0,slippage:r(L),"onUpdate:slippage":a[18]||(a[18]=e=>C(L)?L.value=e:null),canSetAuto:!1},null,8,["slippage"])):"sui"===r(M)?(o(),v(Ga,{key:1,slippage:r(z),"onUpdate:slippage":a[19]||(a[19]=e=>C(z)?z.value=e:null),canSetAuto:!1},null,8,["slippage"])):(o(),v(Ga,{key:2,slippage:r(D),"onUpdate:slippage":a[20]||(a[20]=e=>C(D)?D.value=e:null),autoSlippage:r(U)},null,8,["slippage","autoSlippage"]))]),h(m("li",null,[m("div",Nl,[m("span",null,d(e.$t("estimatedAveragePrice")),1)]),m("div",$l,[m("span",null,"$"+d(La()),1)])],512),[[j,r(ca)&&r(ma)]]),h(m("li",null,[m("div",Fl,[m("span",null,d(e.$t("priceImpact")),1),m("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:a[21]||(a[21]=x(a=>ja(e.$t("priceImpact"),e.$t("priceImpactTips")),["stop"]))})]),m("div",{style:W({color:r(ea)})},d(r(Je))+d(r(Ye)&&r(Ye)?.gt?.(.05)?`(${e.$t("excessivePriceImpact")})`:""),5)],512),[[j,r(ca)&&r(ma)&&!r(y).isDyorswapfun]]),h(m("li",null,[m("div",Cl,[m("span",null,d(e.$t("tokenRoute")),1),m("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:a[22]||(a[22]=x(a=>ja(e.$t("tokenRoute"),e.$t("tokenRouteTips")),["stop"]))})]),"solana"===r(M)||"sui"===r(M)?(o(),n("div",Pl,[(o(!0),n(s,null,u([r(y).fromToken,r(y).toToken],(e,a)=>(o(),n(s,{key:a},[0!==a?(o(),n("img",Rl)):b("",!0),e.symbol?(o(),n("span",Ml,d(e.symbol),1)):b("",!0)],64))),128))])):1===r(na)?.toWrapper||2===r(na)?.toWrapper?(o(),n("div",Vl,[(o(!0),n(s,null,u(r(la),(e,a)=>(o(),n(s,{key:a},[0!==a?(o(),n("img",El)):b("",!0),e.symbol?(o(),n("span",Ul,d(e.symbol),1)):b("",!0)],64))),128))])):(o(),n("div",{key:2,class:"path-list clickable",onClick:a[23]||(a[23]=x(e=>!r(y).isFourMeme&&!r(y).isSunPump&&(J.value=!0),["stop","prevent"]))},[(o(!0),n(s,null,u(r(la),(e,t)=>(o(),n(s,{key:t},[e.symbol?(o(),n("span",Dl,d(e.symbol),1)):b("",!0),e.nextAmm&&"unknown"!==e.nextAmm?(o(),n("div",Bl,[m("img",{class:"icon-amm-logo rounded",src:`${r(p).token_logo_url}swap/${e.nextAmm}.jpeg`,alt:"",srcset:"",onerror:"this.src='/icon-default.png'"},null,8,Ol),a[29]||(a[29]=m("img",{style:{width:"15px",margin:"1px 5px 0"},src:da,alt:"",srcset:""},null,-1))])):b("",!0)],64))),128)),r(Y).length>0?(o(),n("i",Hl)):b("",!0)]))],512),[[j,r(ca)&&r(ma)]]),"solana"!==r(M)&&"tron"!==r(M)&&"sui"!==r(M)&&Number(r(Ke))>0?(o(),n("li",jl,[m("div",Ll,d(e.$t("estimatedGas")),1),m("div",null,"≈ $"+d(r(Ke)),1)])):b("",!0)])],32),T(rt,{visible:r(J),"onUpdate:visible":a[24]||(a[24]=e=>C(J)?J.value=e:null),listRouter:r(Y),isAmount:r(R),selectedRouterIndex:r(ra),onGetSelectedRouter:za},null,8,["visible","listRouter","isAmount","selectedRouterIndex"]),T(rl,{visible:r(va),"onUpdate:visible":a[25]||(a[25]=e=>C(va)?va.value=e:null),swapInfo:r(re),swapQuoteInfo:r(na),slippage:"solana"===r(M)?r(L):"ton"===r(M)||"sui"===r(M)?r(z):r(Ze),loading:r(ie),chain:r(M),nativePrice:r(pe),gasPrice:r(de),activeShow:r(pa),onSubmit:Wa},null,8,["visible","swapInfo","swapQuoteInfo","slippage","loading","chain","nativePrice","gasPrice","activeShow"])],64)}}}),[["__scopeId","data-v-a69b3fe4"]]),ql=e({__name:"swap",setup(e){const a=cl(),t=Ke(()=>Ze(()=>import("./DYF2fgBp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url)),u=l(()=>0===a.swapType||1===a.swapType?t:Wl);return(e,t)=>(o(),n(s,null,[T(ma,{tab:r(a).swapType,"onUpdate:tab":t[0]||(t[0]=e=>r(a).swapType=e)},null,8,["tab"]),(o(),v(Qe(r(u))))],64))}}),Xl=e({__name:"index",setup(e){const t=a(),l=cl(),s=ae();return N([()=>s.token?.token||"",()=>t.chain,()=>t.address],()=>{s.token?.token&&l.init()}),Ge(()=>{l.init()}),(e,a)=>(o(),n("div",null,[T(ca,{activeTab:r(l).activeTab,"onUpdate:activeTab":a[0]||(a[0]=e=>r(l).activeTab=e)},null,8,["activeTab"]),T(ql)]))}}),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"}));export{vl as P,Ba as S,Ga as a,Kl as i,cl as u};
