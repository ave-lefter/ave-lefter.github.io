import{f as e,ay as r,I as a,r as t,y as s,g as n,m as l,aA as i,ai as o,of as u,c,o as d,b as m,i as p,bQ as v,v as f,cg as b,og as A,a as _,U as h,t as y,am as k,K as g,w as j,B as T,F as N,D as x,J as $,d as w,C,aG as F,$ as O,a4 as S,aI as R,aJ as U,aO as L,s as V,aV as I,a2 as K,_ as H,d1 as J}from"#entry";import{L as P,s as Q,d as q}from"./P5SXn6vw.js";import{E as B}from"./1bXUUYzG.js";import"./DJQ0f6YX.js";import"./BbcemesW.js";import"./DWsaYBFQ.js";import"./EyvYgUJ0.js";import"./DZrW0QoB.js";import"./CZIhrSUn.js";import"./DhoqPgLY.js";import"./DYraDxUd.js";import"./DMZvEsQv.js";import"./Div4Sb7D.js";import"./htzw4K3n.js";import"./Dj5W2tf4.js";import"./4ZxzSbBH.js";import"./Ci0kdpII.js";import"./md0wCl8Q.js";import"./BuTxD5e6.js";import"./vIWCTboT.js";import"./C7V9UFRI.js";import"./NZiWsxCB.js";import"./BUyr3k23.js";import"./CXu7cHRZ.js";import"./D1RQ0Ig2.js";import"./U3Xc_iuw.js";import"./DC37kyC8.js";import"./DkMFijTu.js";const D=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const v=e,f=r(),b=a(!1),A=a(!0),_=t([]),h=a({sort_by:"",order:""}),y=a(""),k=a(""),g=a(""),j=t([]),T=s(),N=n(()=>f.params?.id),x=n(()=>{const e=g.value?j.value||[]:_.value||[];return y.value?"sol"==k.value?e?.filter(e=>e.sol_first_transfer_in_from==y.value)||[]:e?.filter(e=>e.token_first_transfer_in_from==y.value)||[]:e||[]});function $(e){if(!i().currentAddress)return;const r={sort_by:e?.sort_by,order:e?.order},a={token_id:N.value,self_address:i().currentAddress,...r};h.value=r,b.value=!0,u(a).then(e=>{const r=e?.holderStats||[];_.value=r||[]}).catch(()=>{_.value=[]}).finally(()=>{b.value=!1})}function w(e){$({sort_by:e.prop,order:e.order?.replace("ending","")})}function C(e){if(g.value=e||"",!g.value)return void $(h.value);const r={token_id:N.value,self_address:i().currentAddress,keyword:g.value};b.value=!0,Q(r).then(e=>{j.value=Array.isArray(e)?e:[]}).catch(()=>{j.value=[]}).finally(()=>{b.value=!1})}function F(e){y.value?(y.value="",k.value=""):(y.value=e.address||"",k.value=e.type||"")}return l(()=>T.headFollowsNum.all,()=>{"Attention"==v.currentActiveTab&&$()}),l(N,()=>{"Attention"==v.currentActiveTab&&$()}),l(()=>i().currentAddress,e=>{e?"Attention"==v.currentActiveTab&&$():_.value=[]}),o(()=>{"Attention"==v.currentActiveTab&&$()}),(e,r)=>(d(),c("div",null,[m(P,{ref:"holdersRef",tableList:p(x),loading:p(b),searchOriginKeyword:p(y),searchOriginType:p(k),isAttention:p(A),onHandleSortChange:w,onFilterAddress:C,onFilterOriginAddress:F},null,8,["tableList","loading","searchOriginKeyword","searchOriginType","isAttention"])]))}}),E={class:"histrory"},G={class:"top"},M={key:0,class:"content"},z=["onClick"],W=H(e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const u=e,H=v(),{t:J}=f(),P=r(),Q=a(!1),D=t([]),W=n(()=>P.params?.id),X=s(),Y=a(!1),Z=t(),ee=n(()=>H.token),re=n(()=>{const e=b(P.params.id);return e?.chain||ee.value?.chain||""}),ae=n(()=>Math.max(H.commonHeight-150,450));function te(){if(!i().currentAddress)return;const e={token_id:W.value,address:i().currentAddress};Q.value=!0,A(e).then(e=>{D.value=e||[]}).finally(()=>{Q.value=!1})}return l(()=>X.headFollowsNum.all,()=>{"Attention"==u.currentActiveTab&&te()}),l(W,()=>{"Attention"==u.currentActiveTab&&te()}),l(()=>i().currentAddress,e=>{e?"Attention"==u.currentActiveTab&&te():D.value=[]}),o(()=>{"Attention"==u.currentActiveTab&&te()}),(e,r)=>{const a=C,t=F,s=L,n=B,l=k;return d(),c("div",E,[_("div",G,[_("span",null,y(e.$t("address")),1),_("span",null,y(e.$t("remark")),1),_("span",null,y(e.$t("buy")),1),_("span",null,y(e.$t("sell")),1),_("span",null,y(e.$t("Txs"))+" ("+y(e.$t("buy1"))+")",1),_("span",null,y(e.$t("Txs"))+" ("+y(e.$t("sell1"))+")",1),_("span",null,y(e.$t("currentPosition")),1),_("span",null,y(e.$t("balance")),1),_("span",null,y(e.$t("profit")),1)]),h((d(),g(n,{height:p(ae)},{default:j(()=>[p(D).length>0?(d(),c("ul",M,[(d(!0),c(N,null,x(p(D),(s,n)=>(d(),c("li",{key:n,class:"flex",onClick:$(e=>function(e){Y.value=!0,Z.value?.getUserTxs(e.address)}({address:s.user_address}),["stop"])},[_("span",null,[m(a,{ref_for:!0,ref:"attentionTriggerRef",name:"custom:attention",class:"h-16px w-16px clickable shrink-0 color-[#F45469] align-middle",onClick:$(e=>function(e,r){const a={address:i().currentAddress,user_address:e.user_address,user_chain:re.value};I(a).then(()=>{X.getFollowsNum(),K.success(J("attention1Canceled")),D.value?.splice(r,1)}).catch(e=>{}).finally(()=>{})}(s,n),["stop","prevent"])},null,8,["onClick"]),w(" *"+y(s.user_address?.slice(-6)),1)]),_("div",{class:"flex-end",onClick:r[0]||(r[0]=$(()=>{},["stop","prevent"]))},[m(t,{addressClass:"token-symbol ellipsis",addressStyle:"max-width: 70px",showAddressTitle:"",address:s.user_address,chain:p(re),remark:s.remark,onUpdateRemark:({remark:e})=>s.remark=e},null,8,["address","chain","remark","onUpdateRemark"])]),_("div",null,y(("formatNumber"in e?e.formatNumber:p(O))(s.bug_amount||0,2)),1),_("div",null,y(("formatNumber"in e?e.formatNumber:p(O))(s.sell_amount||0,2)),1),_("span",null,y(("formatNumber"in e?e.formatNumber:p(O))(s.bug_count||0,0)),1),_("span",null,y(("formatNumber"in e?e.formatNumber:p(O))(s.sell_count||0,0)),1),_("span",null,y(("formatNumber"in e?e.formatNumber:p(O))(s.current_position||0,2)),1),_("span",null,"$"+y(("formatNumber"in e?e.formatNumber:p(O))(s.position_value||0,2)),1),_("div",null,[_("span",{class:"value",style:S({color:s.profit>=0?p(R)[0]:p(U)[0]})}," $"+y(("formatNumber"in e?e.formatNumber:p(O))(s.profit||0,2)),5)])],8,z))),128))])):T("",!0),p(D)&&0!==p(D)?.length||p(Q)?T("",!0):(d(),g(s,{key:1,class:"mt-200px"}))]),_:1},8,["height"])),[[l,p(Q)]]),m(q,{ref_key:"profitLossRef1",ref:Z,modelValue:p(Y),"onUpdate:modelValue":r[1]||(r[1]=e=>V(Y)?Y.value=e:null)},null,8,["modelValue"])])}}}),[["__scopeId","data-v-bb7a359a"]]),X=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const a=e,t=r(),s=v(),l=n(()=>{const e=b(t.params.id);return e?.chain||s.token?.chain||""});return(e,r)=>p(J).includes(p(l))?(d(),g(D,{key:0,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"])):(d(),g(W,{key:1,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"]))}});export{X as default};
